# Failed Tasks

| Date | Task | Branch | Error | Attempts | Status |
|------|------|--------|-------|----------|--------|
| 2026-02-19 | [FEAT] Add `skynet start` and `skynet stop` CLI commands — in packages/cli/src/commands/, `start` launches watchdog.sh as a background process (or loads launchd agents if installed), `stop` kills running workers gracefully via their PID lock files, register both in packages/cli/src/index.ts | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [FEAT] Add crash recovery to watchdog — detect zombie lock files older than SKYNET_STALE_MINUTES, recover from partial task states (unclaim stuck tasks in backlog.md), kill orphan worktree processes, and restart failed workers automatically | merged to main | playwright tests failed (fix attempt 1 failed) | 2 | fixed |
| 2026-02-19 | [INFRA] Add npm package build and publish workflow — add prepublishOnly script to packages/cli/package.json, verify bin field points to compiled output, add GitHub Actions workflow to publish to npm on version tag, test that `npx skynet init` works end-to-end | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [FEAT] Add self-correction metrics tracking — create .dev/metrics.md with auto-fix success rate, track in task-fixer.sh how many failures get auto-resolved vs blocked, expose metrics via new /api/admin/metrics route in packages/admin/src/app/api/admin/metrics/route.ts | dev/add-self-correction-metrics-tracking--cr | playwright tests failed | 0 | superseded |
| 2026-02-19 | [TEST] Add unit tests for shell script lock acquisition and task claiming — test PID lock, mkdir mutex, stale detection, and concurrent worker scenarios | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [TEST] Add TypeScript tests for API handlers — test pipeline-status, tasks POST, prompts extraction, monitoring-agents response shapes | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [FEAT] Add mission progress tracking to project-driver — parse mission.md success criteria, track completion percentage, report in dashboard | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [FEAT] Add mission.md viewer tab to admin dashboard — display the current mission with progress indicators next to each success criterion | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [INFRA] Add CI/CD workflow — GitHub Actions for typecheck, Playwright e2e, and shell script linting on every PR | dev/add-cicd-workflow--github-actions-for-ty | playwright tests failed | 0 | superseded |
| 2026-02-19 | [FEAT] Add webhook notification support — Slack and Discord channels alongside Telegram via pluggable _notify.sh | dev/add-webhook-notification-support--slack- | playwright tests failed | 0 | superseded |
| 2026-02-19 | [FEAT] we need to be able to see in admin for pipeline and monitoring who is active | dev/we-need-to-be-able-to-see-in-admin-for-p | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [TEST] Add integration test for full pipeline task lifecycle — create tests/integration/pipeline-lifecycle.test.sh | dev/add-integration-test-for-full-pipeline-t | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FEAT] Add `skynet logs` CLI command — create packages/cli/src/commands/logs.ts (old spec) | dev/add-skynet-logs-cli-command--create-pack | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [TEST] Add Playwright tests for all dashboard component interactions — expand/collapse, tab switching, trigger buttons, log viewer, mission viewer tab, metrics display | dev/add-playwright-tests-for-all-dashboard-c | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [INFRA] Add more tags and add tooltip to them — ability to fine define tasks | dev/add-more-tags-and-add-tooltip-to-them--a | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FEAT] Add `skynet add-task` CLI command for backlog injection (old spec) | dev/title--description-optionally-appends--- | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add Linux cron support to monitoring agents dashboard | dev/add-linux-cron-support-to-monitoring-age | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add automatic stale branch cleanup for abandoned failed tasks | dev/add-automatic-stale-branch-cleanup-for-a | merge conflict | 0 | superseded |
| 2026-02-19 | [FIX] Fix watchdog hardcoded worker IDs breaking scaling beyond 2 workers | dev/fix-watchdog-hardcoded-worker-ids-breaki | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add multi-project PID isolation validation | dev/add-multi-project-pid-isolation-validati | merge conflict | 0 | superseded |
| 2026-02-19 | [INFRA] Delete stale dev branches and prune worktrees | dev/delete-stale-dev-branches-and-prune-work | merge conflict | 0 | superseded |
| 2026-02-19 | [FIX] Fix watchdog crash_recovery and dispatch hardcoded worker IDs — FRESH implementation (previous branch `dev/fix-watchdog-hardcoded-worker-ids-breaki` has merge conflict — delete it). In `scripts/watchdog.sh`: (1) In `crash_recovery()`, replace `for wid in 1 2` at lines ~115 and ~137 with `for wid in $(seq 1 "${SKYNET_MAX_WORKERS:-2}")`. (2) In Phase 3 orphan worktree cleanup (~line 157), replace the hardcoded `worktree_dirs` array with a dynamic loop building paths for each worker. (3) Replace the hardcoded `w1_running`/`w2_running` variables (~lines 254-262, 350-352) with a dynamic loop checking all workers up to SKYNET_MAX_WORKERS. (4) In the dispatch section, dynamically find idle worker slots instead of only w1/w2. Also verify `validate_backlog()` in `scripts/_config.sh` uses the same dynamic pattern | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [FEAT] Add mission viewer page to admin dashboard — FRESH implementation (previous branch stale). Create `packages/admin/src/app/admin/mission/page.tsx` that imports a new `MissionDashboard` component from `@ajioncorp/skynet/components`. Create `packages/dashboard/src/components/MissionDashboard.tsx` — fetches pipeline status, renders the raw mission.md content as styled markdown (use a `<pre>` or simple renderer), and below it shows a progress table with green/yellow/red status badges per success criterion from `missionProgress`. Add `MissionDashboard` export to `packages/dashboard/src/components/index.ts`. Add navigation entry in `packages/admin/src/app/admin/layout.tsx`: `{ href: "/admin/mission", label: "Mission", icon: Target }` (import Target from lucide-react). Create API route `packages/admin/src/app/api/admin/mission/route.ts` that reads and returns raw `.dev/mission.md` content | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [INFRA] Extend watchdog stale branch cleanup to handle fixed and superseded tasks — the existing `_cleanup_stale_branches()` in `scripts/watchdog.sh` (~line 357) only handles entries with `status=blocked`. Extend it to also delete branches for entries with `status=fixed` (task was retried and merged to main) or `status=superseded` (functionality re-implemented via a different task). Currently there are 16 stale dev/* branches — after this change, the next watchdog run should clean up ~11 of them (those that are fixed/superseded), leaving only branches for actively-worked or pending-retry tasks | dev/extend-watchdog-stale-branch-cleanup-to- | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add `skynet pause` and `skynet resume` CLI commands for pipeline flow control — create `packages/cli/src/commands/pause.ts`: writes a `.dev/pipeline-paused` sentinel file with `{ "pausedAt": "ISO timestamp", "pausedBy": "user" }`. Create `packages/cli/src/commands/resume.ts`: removes the sentinel file. In `scripts/dev-worker.sh`, after PID lock acquisition, check `if [ -f "$DEV_DIR/pipeline-paused" ]; then log "Pipeline paused — exiting"; exit 0; fi`. Same check in `scripts/task-fixer.sh` and `scripts/project-driver.sh`. In `scripts/watchdog.sh`, skip worker dispatch when paused but still run health checks and stale detection. In `packages/cli/src/commands/status.ts`, show "PAUSED" status when sentinel exists. Register both commands in `packages/cli/src/index.ts` | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [FEAT] Add pipeline event log for audit trail and activity feed — add an `emit_event()` function to `scripts/_config.sh` that appends JSON lines to `.dev/events.log`: `{"ts":"2026-02-19T17:30:00Z","event":"task_claimed","worker":1,"detail":"Add feature X"}`. Call from key points: `dev-worker.sh` (task_claimed, task_completed, task_failed, gate_passed, gate_failed), `task-fixer.sh` (fix_started, fix_succeeded, fix_failed), `watchdog.sh` (worker_killed, stale_detected, branch_cleaned), `project-driver.sh` (backlog_replenished). Create `packages/dashboard/src/handlers/events.ts` that reads last 100 lines from events.log and returns as JSON array. Add `/api/admin/events` route in `packages/admin/src/app/api/admin/events/route.ts`. Add an `ActivityFeed` component to `packages/dashboard/src/components/` showing a scrollable list of recent events with timestamps and colored icons per event type. Add to the pipeline dashboard page | dev/add-pipeline-event-log-for-audit-trail-a | merge conflict | 0 | superseded |
| 2026-02-19 | [FIX] Fix SKYNET_MAX_WORKERS default mismatch between config template and watchdog — in `templates/skynet.config.sh`, change `SKYNET_MAX_WORKERS="2"` to `SKYNET_MAX_WORKERS="4"` to match the `${SKYNET_MAX_WORKERS:-4}` fallback in `scripts/watchdog.sh`. Audit all `:-` default fallbacks in `scripts/watchdog.sh`, `scripts/dev-worker.sh`, `scripts/task-fixer.sh`, and `scripts/_config.sh` to ensure they match config template values. Add a comment next to each SKYNET_* variable in the template documenting the default and what the variable controls. Criterion #1 (smooth setup) and #3 (no surprises from mismatched defaults) | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [TEST] Add events handler unit tests and ActivityFeed component tests — create `packages/dashboard/src/handlers/events.test.ts`: test `emit_event()` appends JSON lines correctly, test reading last 100 events returns proper `EventEntry[]` shape, test empty events.log returns empty array, test malformed lines are skipped gracefully. Create `packages/dashboard/src/components/ActivityFeed.test.tsx` using vitest + @testing-library/react: test renders event list, test color-codes by event type, test empty state message, test timestamp formatting. Follow existing test patterns. Criterion #2 (test coverage for new event system) | dev/add-events-handler-unit-tests-and-activi | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add pipeline event log for audit trail and activity feed — FRESH implementation (previous branch `dev/add-pipeline-event-log-for-audit-trail-a` has merge conflict — delete it). Add an `emit_event()` function to `scripts/_config.sh` that appends JSON lines to `.dev/events.log`: `{"ts":"ISO","event":"type","worker":N,"detail":"text"}`. Call from key points: `dev-worker.sh` (task_claimed, task_completed, task_failed), `task-fixer.sh` (fix_started, fix_succeeded, fix_failed), `watchdog.sh` (worker_killed, stale_detected, branch_cleaned), `project-driver.sh` (backlog_replenished). Create `packages/dashboard/src/handlers/events.ts` that reads last 100 lines from events.log and returns as JSON array. Add `/api/admin/events` route in `packages/admin/src/app/api/admin/events/route.ts`. Add an `ActivityFeed` component to `packages/dashboard/src/components/` showing a scrollable list of recent events with timestamps and colored icons per event type. Export from component index. Add to pipeline dashboard page | dev/add-pipeline-event-log-for-audit-trail-a | merge conflict | 0 | superseded |
| 2026-02-19 | [FIX] Auto-supersede stale failed-task entries whose tasks were completed via fresh implementations — in `scripts/watchdog.sh`, during the failed-tasks cleanup phase, read each entry with `status=pending`. For each, normalize the task title (strip "FRESH implementation" prefix/suffix) and check if a matching title appears in `.dev/completed.md`. If found, update the failed entry to `status=superseded` and delete the stale branch if it exists. Currently the "self-correction metrics tracking" entry is pending but was superseded by the completed "self-correction rate calculation" task. This prevents the task-fixer from wasting cycles on already-solved problems. Criterion #3 (clean state) | dev/auto-supersede-stale-failed-task-entries | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [TEST] Add events handler unit tests and ActivityFeed component tests — create `packages/dashboard/src/handlers/events.test.ts`: test `emit_event()` appends JSON lines correctly, test reading last 100 events returns proper `EventEntry[]` shape, test empty events.log returns empty array, test malformed lines are skipped gracefully. Create `packages/dashboard/src/components/ActivityFeed.test.tsx` using vitest + @testing-library/react: test renders event list, test color-codes by event type, test empty state message, test timestamp formatting. Follow existing test patterns. Criterion #2 (test coverage for new event system). blockedBy: Add pipeline event log for audit trail and activity feed | dev/add-events-handler-unit-tests-and-activi | merge conflict | 0 | superseded |
| 2026-02-19 | [TEST] Add events handler unit tests and ActivityFeed component tests — create `packages/dashboard/src/handlers/events.test.ts`: test `createEventsHandler` reads pipe-delimited events.log and returns proper `EventEntry[]` shape, test empty/missing events.log returns empty array, test malformed lines are skipped gracefully, test limit to last 100 entries when file has more, test epoch-to-ISO conversion. Create `packages/dashboard/src/components/ActivityFeed.test.tsx` using vitest + @testing-library/react: test renders event list from mock data, test color-codes by event type, test empty state shows "No events" message, test auto-refresh interval is set. Follow existing test patterns in `packages/dashboard/src/handlers/*.test.ts`. Criterion #2 (test coverage for new event system). blockedBy: Build events TypeScript handler, API route, and ActivityFeed dashboard component | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [TEST] Add mission-raw and pipeline-stream handler unit tests — create `packages/dashboard/src/handlers/mission-raw.test.ts`: test it reads and returns `.dev/mission.md` raw content, test missing file returns appropriate error/empty response, test response shape matches expected interface. Create `packages/dashboard/src/handlers/pipeline-stream.test.ts`: test SSE headers are set correctly (`text/event-stream`, `no-cache`), test file-watch setup is called (mock `fs.watch`), test stream sends data in SSE format (`data: {...}\n\n`), test cleanup on client disconnect. Follow existing handler test patterns. These are the last 2 untested handlers in the dashboard package. Criterion #2 (complete handler test coverage) | -- | Stale lock after 45m | 0 | superseded |
| 2026-02-19 | [TEST] Add mission-raw and pipeline-stream handler unit tests — create `packages/dashboard/src/handlers/mission-raw.test.ts`: test it reads and returns `.dev/mission.md` raw content, test missing file returns appropriate error/empty response, test response shape matches expected interface. Create `packages/dashboard/src/handlers/pipeline-stream.test.ts`: test SSE headers are set correctly (`text/event-stream`, `no-cache`), test file-watch setup is called (mock `fs.watch`), test stream sends data in SSE format (`data: {...}\n\n`), test cleanup on client disconnect. Follow existing handler test patterns. These are the last 2 untested handlers in the dashboard package. Criterion #2 (complete handler test coverage) | -- | Stale lock after 45m | 0 | superseded |
| 2026-02-19 | [TEST] Add mission-raw and pipeline-stream handler unit tests — create `packages/dashboard/src/handlers/mission-raw.test.ts`: test it reads and returns `.dev/mission.md` raw content, test missing file returns appropriate error/empty response, test response shape matches expected interface. Create `packages/dashboard/src/handlers/pipeline-stream.test.ts`: test SSE headers are set correctly (`text/event-stream`, `no-cache`), test file-watch setup is called (mock `fs.watch`), test stream sends data in SSE format (`data: {...}\n\n`), test cleanup on client disconnect. Follow existing handler test patterns. These are the last 2 untested handlers in the dashboard package. Criterion #2 (complete handler test coverage) | -- | Stale lock after 45m | 0 | superseded |
| 2026-02-19 | [FEAT] Add JSON output mode to `skynet status` for programmatic access — in `packages/cli/src/commands/status.ts`, add a `--json` boolean option. When set, instead of printing formatted text, collect all data into a structured object `{ project, paused, tasks: { pending, claimed, completed, failed }, workers: [...], healthScore, selfCorrectionRate, missionProgress: [...], lastActivity }` and output via `console.log(JSON.stringify(data, null, 2))`. This enables CI pipelines, monitoring scripts, and external tools to consume pipeline status programmatically. Also add `--quiet` flag that outputs only the health score number (for use in shell scripts: `if [ $(skynet status --quiet) -lt 50 ]; then alert; fi`). Criterion #1 (developer experience) and #5 (mission progress measurable from any context) | dev/add-json-output-mode-to-skynet-status-fo | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Wire emit_event() into bash scripts (1st attempt — SIGTERM) | dev/wire-emitevent-calls-into-dev-workersh-t | claude exit code 143 | 0 | superseded |
| 2026-02-19 | [FEAT] Wire emit_event() into bash scripts (2nd attempt) | dev/wire-emitevent-calls-into-dev-workersh-t | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [DOCS] Update README CLI reference with upgrade, run, watch | dev/update-readme-cli-reference-with-upgrade | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FEAT] Add `skynet metrics` CLI command | dev/counts-and-percentages-read-devfailed-ta | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [TEST] Add CLI unit tests for watch, run, upgrade, cleanup, metrics | dev/add-cli-unit-tests-for-watch-run-upgrade | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FEAT] Add `/admin/events` page with EventsDashboard | dev/add-adminevents-page-with-event-filterin | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [INFRA] Add pipeline performance summary to project-driver | dev/add-pipeline-performance-summary-to-proj | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FIX] Clean up stale failed-tasks.md entries | dev/clean-up-stale-failed-tasksmd-entries-an | claude exit code 1 | 0 | superseded |
| 2026-02-20 | [TEST] Add EventsDashboard component tests — create `packages/dashboard/src/components/EventsDashboard.test.tsx` using vitest + @testing-library/react. Test: renders event table from mock fetch data, filter dropdown filters by event type, search input filters by detail text, empty state shows appropriate message. Mock `fetch` globally with `vi.fn()`. Follow patterns in existing component tests like `PipelineDashboard.test.tsx`. Criterion #2. blockedBy: Add EventsDashboard component and `/admin/events` page | merged to main | merge conflict | 1 | fixed |
| 2026-02-20 | [FEAT] Add `echo` agent plugin for pipeline dry-run testing — create `scripts/agents/echo.sh` as a minimal agent plugin that echoes the task description back without calling any LLM. On `agent_run()`, create a single commit with a placeholder file containing the task description and "TODO: implement". On `agent_check()`, return success. This lets users run `SKYNET_AGENT_PLUGIN=echo skynet start` to test the full pipeline lifecycle (claim, branch, gate, merge) without burning LLM API tokens. Register in the agent selection logic in `scripts/_agent.sh`. Run `pnpm typecheck` and `bash -n scripts/agents/echo.sh`. Criterion #1 (faster pipeline verification during setup) and #6 (extensible to any agent) | dev/add-echo-agent-plugin-for-pipeline-dry-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Fix codex.sh to pipe prompt via stdin instead of CLI argument — in `scripts/agents/codex.sh` line 41, `_agent_exec $SKYNET_CODEX_BIN $SKYNET_CODEX_FLAGS $model_flag "$prompt"` passes the prompt as a CLI argument. `claude.sh` was already fixed to pipe via stdin to avoid ARG_MAX limits (~256KB per argument on macOS). For large task descriptions with extensive `SKYNET_WORKER_CONTEXT`, the codex agent will silently fail. Fix: change line 41 to `printf '%s\n' "$prompt" | _agent_exec $SKYNET_CODEX_BIN $SKYNET_CODEX_FLAGS $model_flag >> "$log_file" 2>&1` matching `claude.sh`'s pattern. Verify Codex CLI accepts stdin input (check `--help` output). If Codex doesn't support stdin, use a temp file: `local _prompt_file=$(mktemp); printf '%s\n' "$prompt" > "$_prompt_file"; _agent_exec ... --file "$_prompt_file"` and clean up in the trap handler. Run `bash -n scripts/agents/codex.sh`. Criterion #6 (agent parity — all plugins should handle large prompts) | dev/fix-codexsh-to-pipe-prompt-via-stdin-ins | typecheck failed | 0 | pending |
| 2026-02-20 | [FIX] Add missing `SKYNET_WATCHDOG_INTERVAL` and `SKYNET_ONE_SHOT` to config template — `SKYNET_WATCHDOG_INTERVAL` is used in `scripts/watchdog.sh` line 16 (`${SKYNET_WATCHDOG_INTERVAL:-180}`) and documented in `config.ts` KNOWN_VARS, but is NOT in `templates/skynet.config.sh`. Users cannot discover or tune watchdog dispatch frequency. `SKYNET_ONE_SHOT` is used in 5 places in `watchdog.sh` and 9 places in `dev-worker.sh` as a feature flag for single-task mode, but is completely undocumented. Fix: add to `templates/skynet.config.sh` before the closing comments: `export SKYNET_WATCHDOG_INTERVAL="180"` with comment "# Seconds between watchdog monitoring cycles" and `export SKYNET_ONE_SHOT=""` with comment "# Set to 1 for single-task mode (worker exits after one task)". Also add `SKYNET_ONE_SHOT` to `KNOWN_VARS` in `config.ts` with description "Run workers in single-task mode — exit after completing one task". Run `pnpm typecheck`. Criterion #1 (discoverable configuration — all tuning knobs must be in the template) | dev/add-missing-skynetwatchdoginterval-and-s | typecheck failed | 0 | pending |
| 2026-02-20 | [FIX] Fix duplicate Activity icon for events page in admin navigation — in `packages/admin/src/app/admin/layout.tsx`, both `pipeline` (line 9) and `events` (line 17) use the `Activity` icon from lucide-react. This makes the sidebar navigation confusing — two identical icons for different pages. Fix: change the `events` entry to use the `ScrollText` icon (or `FileText`/`ListOrdered`), which better represents an event log/audit trail. Import `ScrollText` from `lucide-react` and update the icon property. Run `pnpm typecheck`. Criterion #4 (dashboard usability — distinct visual navigation) | dev/fix-duplicate-activity-icon-for-events-p | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add E2E tests for `skynet stop`, `skynet pause`/`resume`, and remaining CLI smoke tests — in `tests/e2e/cli-commands.test.sh`, the E2E suite covers init, add-task, status, doctor, config, export/import, but is missing critical operational commands. Add: (a) **stop**: create a mock PID lock directory for `dev-worker-3`, run `skynet stop`, verify it attempts to kill the correct PIDs and removes lock dirs (this catches the hardcoded worker list bug). (b) **pause/resume**: run `skynet pause`, verify `.dev/pipeline-paused` sentinel exists with correct JSON, run `skynet resume`, verify sentinel is removed. (c) **completions**: run `skynet completions bash`, verify output contains `complete -W` and all 26 command names. (d) **validate**: run `skynet validate`, verify it checks gates, git remote, disk space, and mission.md. These are the last untested CLI E2E workflows. Run `pnpm typecheck`. Criterion #2 (comprehensive E2E coverage — all operational commands tested) | dev/add-e2e-tests-for-skynet-stop-skynet-pau | typecheck failed | 0 | pending |
| 2026-02-20 | [TEST] Add E2E tests for `skynet stop`, `skynet pause`/`resume`, and remaining CLI smoke tests — in `tests/e2e/cli-commands.test.sh`, the E2E suite covers init, add-task, status, doctor, config, export/import, but is missing critical operational commands. Add: (a) **stop**: create a mock PID lock directory for `dev-worker-3`, run `skynet stop`, verify it attempts to kill the correct PIDs and removes lock dirs (this catches the hardcoded worker list bug). (b) **pause/resume**: run `skynet pause`, verify `.dev/pipeline-paused` sentinel exists with correct JSON, run `skynet resume`, verify sentinel is removed. (c) **completions**: run `skynet completions bash`, verify output contains `complete -W` and all 26 command names. (d) **validate**: run `skynet validate`, verify it checks gates, git remote, disk space, and mission.md. These are the last untested CLI E2E workflows. Run `pnpm typecheck`. Criterion #2 (comprehensive E2E coverage — all operational commands tested) | dev/add-e2e-tests-for-skynet-stop-skynet-pau | typecheck failed | 0 | pending |
| 2026-02-20 | [TEST] Add E2E tests for `skynet stop`, `skynet pause`/`resume`, and remaining CLI smoke tests — in `tests/e2e/cli-commands.test.sh`, the E2E suite covers init, add-task, status, doctor, config, export/import, but is missing critical operational commands. Add: (a) **stop**: create a mock PID lock directory for `dev-worker-3`, run `skynet stop`, verify it attempts to kill the correct PIDs and removes lock dirs (this catches the hardcoded worker list bug). (b) **pause/resume**: run `skynet pause`, verify `.dev/pipeline-paused` sentinel exists with correct JSON, run `skynet resume`, verify sentinel is removed. (c) **completions**: run `skynet completions bash`, verify output contains `complete -W` and all 26 command names. (d) **validate**: run `skynet validate`, verify it checks gates, git remote, disk space, and mission.md. These are the last untested CLI E2E workflows. Run `pnpm typecheck`. Criterion #2 (comprehensive E2E coverage — all operational commands tested) | dev/add-e2e-tests-for-skynet-stop-skynet-pau | typecheck failed | 0 | pending |
| 2026-02-20 | [FIX] Optimize pipeline-logs handler to avoid reading entire file for line count — in `packages/dashboard/src/handlers/pipeline-logs.ts` lines 96-97, `const content = readFileSync(logPath, "utf-8"); totalLines = content.split("\n").length;` reads the entire log file into memory just to count lines. For log files at the `SKYNET_MAX_LOG_SIZE_KB` limit (1 MB), this allocates and splits a 1 MB string on every API call to `/api/admin/pipeline/logs`. The response data (tail output) is already computed separately above. Fix: replace the full-file read with a streaming line counter: `let totalLines = 0; const buf = readFileSync(logPath); for (let i = 0; i < buf.length; i++) { if (buf[i] === 10) totalLines++; } totalLines++;`. This counts newlines without creating an array of substrings, reducing memory usage by ~4x for large files. Alternatively, since the `tail` offset is the primary use case, set `totalLines` to an estimate using `statSync(logPath).size / 80` (average line length) if exact count is not critical. Run `pnpm typecheck`. Criterion #3 (efficient API handlers — no unnecessary memory allocation) | dev/-10-totallines--totallines-this-counts-n | typecheck failed | 0 | pending |
| 2026-02-20 | [FIX] Extract duplicate `extractTitle` and `parseBlockedBy` to shared backlog-parser module — in `packages/dashboard/src/handlers/pipeline-status.ts` (lines 29, 39) and `packages/dashboard/src/handlers/tasks.ts` (lines 7, 20), `extractTitle()` and `parseBlockedBy()` are byte-for-byte identical copy-pastes. A third `parseBacklog()` exists independently in `packages/dashboard/src/lib/backlog-parser.ts` (already exported). Fix: (1) Move `extractTitle()` and `parseBlockedBy()` to `packages/dashboard/src/lib/backlog-parser.ts` alongside the existing `parseBacklog`. (2) Update `pipeline-status.ts` and `tasks.ts` to import from `../lib/backlog-parser` and delete their local copies. (3) If `tasks.ts` has a more feature-rich `parseBacklog` (with blocked-dependency resolution), consolidate into the shared version with an options parameter. Run `pnpm typecheck`. Criterion #3 (DRY — bug in title parsing must be fixable in one place) | dev/extract-duplicate-extracttitle-and-parse | typecheck failed | 0 | pending |
| 2026-02-20 | [FIX] Extract duplicate `extractTitle` and `parseBlockedBy` to shared backlog-parser module — in `packages/dashboard/src/handlers/pipeline-status.ts` (lines 29, 39) and `packages/dashboard/src/handlers/tasks.ts` (lines 7, 20), `extractTitle()` and `parseBlockedBy()` are byte-for-byte identical copy-pastes. A third `parseBacklog()` exists independently in `packages/dashboard/src/lib/backlog-parser.ts` (already exported). Fix: (1) Move `extractTitle()` and `parseBlockedBy()` to `packages/dashboard/src/lib/backlog-parser.ts` alongside the existing `parseBacklog`. (2) Update `pipeline-status.ts` and `tasks.ts` to import from `../lib/backlog-parser` and delete their local copies. (3) If `tasks.ts` has a more feature-rich `parseBacklog` (with blocked-dependency resolution), consolidate into the shared version with an options parameter. Run `pnpm typecheck`. Criterion #3 (DRY — bug in title parsing must be fixable in one place) | dev/extract-duplicate-extracttitle-and-parse | typecheck failed | 0 | pending |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` utilities to shared CLI module — `isProcessRunning()` is copy-pasted in 4 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `start.ts`) with minor signature variation. `readFile()` (a 3-line try/catch wrapper around `readFileSync`) is copy-pasted in 5 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `metrics.ts`, `cleanup.ts`). Fix: (1) Create `packages/cli/src/utils/readFile.ts` exporting `readFile(path: string): string` that returns empty string on error. (2) Create `packages/cli/src/utils/isProcessRunning.ts` exporting `isProcessRunning(lockPath: string): { running: boolean; pid: string }` supporting both dir-based and file-based locks. (3) Update all 9 files to import from the shared utils and delete their local copies. This follows the same DRY pattern used for `loadConfig.ts` (which eliminated 19 duplicates). Run `pnpm typecheck`. Criterion #3 (maintainable code — DRY principle) | dev/extract-duplicate-isprocessrunning-and-r | typecheck failed | 0 | pending |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` utilities to shared CLI module — `isProcessRunning()` is copy-pasted in 4 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `start.ts`) with minor signature variation. `readFile()` (a 3-line try/catch wrapper around `readFileSync`) is copy-pasted in 5 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `metrics.ts`, `cleanup.ts`). Fix: (1) Create `packages/cli/src/utils/readFile.ts` exporting `readFile(path: string): string` that returns empty string on error. (2) Create `packages/cli/src/utils/isProcessRunning.ts` exporting `isProcessRunning(lockPath: string): { running: boolean; pid: string }` supporting both dir-based and file-based locks. (3) Update all 9 files to import from the shared utils and delete their local copies. This follows the same DRY pattern used for `loadConfig.ts` (which eliminated 19 duplicates). Run `pnpm typecheck`. Criterion #3 (maintainable code — DRY principle) | dev/extract-duplicate-isprocessrunning-and-r | typecheck failed | 0 | pending |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` utilities to shared CLI module — `isProcessRunning()` is copy-pasted in 4 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `start.ts`) with minor signature variation. `readFile()` (a 3-line try/catch wrapper around `readFileSync`) is copy-pasted in 5 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `metrics.ts`, `cleanup.ts`). Fix: (1) Create `packages/cli/src/utils/readFile.ts` exporting `readFile(path: string): string` that returns empty string on error. (2) Create `packages/cli/src/utils/isProcessRunning.ts` exporting `isProcessRunning(lockPath: string): { running: boolean; pid: string }` supporting both dir-based and file-based locks. (3) Update all 9 files to import from the shared utils and delete their local copies. This follows the same DRY pattern used for `loadConfig.ts` (which eliminated 19 duplicates). Run `pnpm typecheck`. Criterion #3 (maintainable code — DRY principle) | dev/extract-duplicate-isprocessrunning-and-r | typecheck failed | 0 | pending |
