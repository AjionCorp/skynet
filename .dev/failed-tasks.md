# Failed Tasks

| Date | Task | Branch | Error | Attempts | Status |
|------|------|--------|-------|----------|--------|
| 2026-02-19 | [FEAT] Add `skynet start` and `skynet stop` CLI commands — in packages/cli/src/commands/, `start` launches watchdog.sh as a background process (or loads launchd agents if installed), `stop` kills running workers gracefully via their PID lock files, register both in packages/cli/src/index.ts | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [FEAT] Add crash recovery to watchdog — detect zombie lock files older than SKYNET_STALE_MINUTES, recover from partial task states (unclaim stuck tasks in backlog.md), kill orphan worktree processes, and restart failed workers automatically | merged to main | playwright tests failed (fix attempt 1 failed) | 2 | fixed |
| 2026-02-19 | [INFRA] Add npm package build and publish workflow — add prepublishOnly script to packages/cli/package.json, verify bin field points to compiled output, add GitHub Actions workflow to publish to npm on version tag, test that `npx skynet init` works end-to-end | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [FEAT] Add self-correction metrics tracking — create .dev/metrics.md with auto-fix success rate, track in task-fixer.sh how many failures get auto-resolved vs blocked, expose metrics via new /api/admin/metrics route in packages/admin/src/app/api/admin/metrics/route.ts | dev/add-self-correction-metrics-tracking--cr | playwright tests failed | 0 | superseded |
| 2026-02-19 | [TEST] Add unit tests for shell script lock acquisition and task claiming — test PID lock, mkdir mutex, stale detection, and concurrent worker scenarios | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [TEST] Add TypeScript tests for API handlers — test pipeline-status, tasks POST, prompts extraction, monitoring-agents response shapes | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [FEAT] Add mission progress tracking to project-driver — parse mission.md success criteria, track completion percentage, report in dashboard | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [FEAT] Add mission.md viewer tab to admin dashboard — display the current mission with progress indicators next to each success criterion | merged to main | playwright tests failed | 1 | fixed |
| 2026-02-19 | [INFRA] Add CI/CD workflow — GitHub Actions for typecheck, Playwright e2e, and shell script linting on every PR | dev/add-cicd-workflow--github-actions-for-ty | playwright tests failed | 0 | superseded |
| 2026-02-19 | [FEAT] Add webhook notification support — Slack and Discord channels alongside Telegram via pluggable _notify.sh | dev/add-webhook-notification-support--slack- | playwright tests failed | 0 | superseded |
| 2026-02-19 | [FEAT] we need to be able to see in admin for pipeline and monitoring who is active | dev/we-need-to-be-able-to-see-in-admin-for-p | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [TEST] Add integration test for full pipeline task lifecycle — create tests/integration/pipeline-lifecycle.test.sh | dev/add-integration-test-for-full-pipeline-t | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FEAT] Add `skynet logs` CLI command — create packages/cli/src/commands/logs.ts (old spec) | dev/add-skynet-logs-cli-command--create-pack | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [TEST] Add Playwright tests for all dashboard component interactions — expand/collapse, tab switching, trigger buttons, log viewer, mission viewer tab, metrics display | dev/add-playwright-tests-for-all-dashboard-c | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [INFRA] Add more tags and add tooltip to them — ability to fine define tasks | dev/add-more-tags-and-add-tooltip-to-them--a | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FEAT] Add `skynet add-task` CLI command for backlog injection (old spec) | dev/title--description-optionally-appends--- | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add Linux cron support to monitoring agents dashboard | dev/add-linux-cron-support-to-monitoring-age | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add automatic stale branch cleanup for abandoned failed tasks | dev/add-automatic-stale-branch-cleanup-for-a | merge conflict | 0 | superseded |
| 2026-02-19 | [FIX] Fix watchdog hardcoded worker IDs breaking scaling beyond 2 workers | dev/fix-watchdog-hardcoded-worker-ids-breaki | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add multi-project PID isolation validation | dev/add-multi-project-pid-isolation-validati | merge conflict | 0 | superseded |
| 2026-02-19 | [INFRA] Delete stale dev branches and prune worktrees | dev/delete-stale-dev-branches-and-prune-work | merge conflict | 0 | superseded |
| 2026-02-19 | [FIX] Fix watchdog crash_recovery and dispatch hardcoded worker IDs — FRESH implementation (previous branch `dev/fix-watchdog-hardcoded-worker-ids-breaki` has merge conflict — delete it). In `scripts/watchdog.sh`: (1) In `crash_recovery()`, replace `for wid in 1 2` at lines ~115 and ~137 with `for wid in $(seq 1 "${SKYNET_MAX_WORKERS:-2}")`. (2) In Phase 3 orphan worktree cleanup (~line 157), replace the hardcoded `worktree_dirs` array with a dynamic loop building paths for each worker. (3) Replace the hardcoded `w1_running`/`w2_running` variables (~lines 254-262, 350-352) with a dynamic loop checking all workers up to SKYNET_MAX_WORKERS. (4) In the dispatch section, dynamically find idle worker slots instead of only w1/w2. Also verify `validate_backlog()` in `scripts/_config.sh` uses the same dynamic pattern | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [FEAT] Add mission viewer page to admin dashboard — FRESH implementation (previous branch stale). Create `packages/admin/src/app/admin/mission/page.tsx` that imports a new `MissionDashboard` component from `@ajioncorp/skynet/components`. Create `packages/dashboard/src/components/MissionDashboard.tsx` — fetches pipeline status, renders the raw mission.md content as styled markdown (use a `<pre>` or simple renderer), and below it shows a progress table with green/yellow/red status badges per success criterion from `missionProgress`. Add `MissionDashboard` export to `packages/dashboard/src/components/index.ts`. Add navigation entry in `packages/admin/src/app/admin/layout.tsx`: `{ href: "/admin/mission", label: "Mission", icon: Target }` (import Target from lucide-react). Create API route `packages/admin/src/app/api/admin/mission/route.ts` that reads and returns raw `.dev/mission.md` content | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [INFRA] Extend watchdog stale branch cleanup to handle fixed and superseded tasks — the existing `_cleanup_stale_branches()` in `scripts/watchdog.sh` (~line 357) only handles entries with `status=blocked`. Extend it to also delete branches for entries with `status=fixed` (task was retried and merged to main) or `status=superseded` (functionality re-implemented via a different task). Currently there are 16 stale dev/* branches — after this change, the next watchdog run should clean up ~11 of them (those that are fixed/superseded), leaving only branches for actively-worked or pending-retry tasks | dev/extend-watchdog-stale-branch-cleanup-to- | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add `skynet pause` and `skynet resume` CLI commands for pipeline flow control — create `packages/cli/src/commands/pause.ts`: writes a `.dev/pipeline-paused` sentinel file with `{ "pausedAt": "ISO timestamp", "pausedBy": "user" }`. Create `packages/cli/src/commands/resume.ts`: removes the sentinel file. In `scripts/dev-worker.sh`, after PID lock acquisition, check `if [ -f "$DEV_DIR/pipeline-paused" ]; then log "Pipeline paused — exiting"; exit 0; fi`. Same check in `scripts/task-fixer.sh` and `scripts/project-driver.sh`. In `scripts/watchdog.sh`, skip worker dispatch when paused but still run health checks and stale detection. In `packages/cli/src/commands/status.ts`, show "PAUSED" status when sentinel exists. Register both commands in `packages/cli/src/index.ts` | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [FEAT] Add pipeline event log for audit trail and activity feed — add an `emit_event()` function to `scripts/_config.sh` that appends JSON lines to `.dev/events.log`: `{"ts":"2026-02-19T17:30:00Z","event":"task_claimed","worker":1,"detail":"Add feature X"}`. Call from key points: `dev-worker.sh` (task_claimed, task_completed, task_failed, gate_passed, gate_failed), `task-fixer.sh` (fix_started, fix_succeeded, fix_failed), `watchdog.sh` (worker_killed, stale_detected, branch_cleaned), `project-driver.sh` (backlog_replenished). Create `packages/dashboard/src/handlers/events.ts` that reads last 100 lines from events.log and returns as JSON array. Add `/api/admin/events` route in `packages/admin/src/app/api/admin/events/route.ts`. Add an `ActivityFeed` component to `packages/dashboard/src/components/` showing a scrollable list of recent events with timestamps and colored icons per event type. Add to the pipeline dashboard page | dev/add-pipeline-event-log-for-audit-trail-a | merge conflict | 0 | superseded |
| 2026-02-19 | [FIX] Fix SKYNET_MAX_WORKERS default mismatch between config template and watchdog — in `templates/skynet.config.sh`, change `SKYNET_MAX_WORKERS="2"` to `SKYNET_MAX_WORKERS="4"` to match the `${SKYNET_MAX_WORKERS:-4}` fallback in `scripts/watchdog.sh`. Audit all `:-` default fallbacks in `scripts/watchdog.sh`, `scripts/dev-worker.sh`, `scripts/task-fixer.sh`, and `scripts/_config.sh` to ensure they match config template values. Add a comment next to each SKYNET_* variable in the template documenting the default and what the variable controls. Criterion #1 (smooth setup) and #3 (no surprises from mismatched defaults) | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [TEST] Add events handler unit tests and ActivityFeed component tests — create `packages/dashboard/src/handlers/events.test.ts`: test `emit_event()` appends JSON lines correctly, test reading last 100 events returns proper `EventEntry[]` shape, test empty events.log returns empty array, test malformed lines are skipped gracefully. Create `packages/dashboard/src/components/ActivityFeed.test.tsx` using vitest + @testing-library/react: test renders event list, test color-codes by event type, test empty state message, test timestamp formatting. Follow existing test patterns. Criterion #2 (test coverage for new event system) | dev/add-events-handler-unit-tests-and-activi | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Add pipeline event log for audit trail and activity feed — FRESH implementation (previous branch `dev/add-pipeline-event-log-for-audit-trail-a` has merge conflict — delete it). Add an `emit_event()` function to `scripts/_config.sh` that appends JSON lines to `.dev/events.log`: `{"ts":"ISO","event":"type","worker":N,"detail":"text"}`. Call from key points: `dev-worker.sh` (task_claimed, task_completed, task_failed), `task-fixer.sh` (fix_started, fix_succeeded, fix_failed), `watchdog.sh` (worker_killed, stale_detected, branch_cleaned), `project-driver.sh` (backlog_replenished). Create `packages/dashboard/src/handlers/events.ts` that reads last 100 lines from events.log and returns as JSON array. Add `/api/admin/events` route in `packages/admin/src/app/api/admin/events/route.ts`. Add an `ActivityFeed` component to `packages/dashboard/src/components/` showing a scrollable list of recent events with timestamps and colored icons per event type. Export from component index. Add to pipeline dashboard page | dev/add-pipeline-event-log-for-audit-trail-a | merge conflict | 0 | superseded |
| 2026-02-19 | [FIX] Auto-supersede stale failed-task entries whose tasks were completed via fresh implementations — in `scripts/watchdog.sh`, during the failed-tasks cleanup phase, read each entry with `status=pending`. For each, normalize the task title (strip "FRESH implementation" prefix/suffix) and check if a matching title appears in `.dev/completed.md`. If found, update the failed entry to `status=superseded` and delete the stale branch if it exists. Currently the "self-correction metrics tracking" entry is pending but was superseded by the completed "self-correction rate calculation" task. This prevents the task-fixer from wasting cycles on already-solved problems. Criterion #3 (clean state) | dev/auto-supersede-stale-failed-task-entries | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [TEST] Add events handler unit tests and ActivityFeed component tests — create `packages/dashboard/src/handlers/events.test.ts`: test `emit_event()` appends JSON lines correctly, test reading last 100 events returns proper `EventEntry[]` shape, test empty events.log returns empty array, test malformed lines are skipped gracefully. Create `packages/dashboard/src/components/ActivityFeed.test.tsx` using vitest + @testing-library/react: test renders event list, test color-codes by event type, test empty state message, test timestamp formatting. Follow existing test patterns. Criterion #2 (test coverage for new event system). blockedBy: Add pipeline event log for audit trail and activity feed | dev/add-events-handler-unit-tests-and-activi | merge conflict | 0 | superseded |
| 2026-02-19 | [TEST] Add events handler unit tests and ActivityFeed component tests — create `packages/dashboard/src/handlers/events.test.ts`: test `createEventsHandler` reads pipe-delimited events.log and returns proper `EventEntry[]` shape, test empty/missing events.log returns empty array, test malformed lines are skipped gracefully, test limit to last 100 entries when file has more, test epoch-to-ISO conversion. Create `packages/dashboard/src/components/ActivityFeed.test.tsx` using vitest + @testing-library/react: test renders event list from mock data, test color-codes by event type, test empty state shows "No events" message, test auto-refresh interval is set. Follow existing test patterns in `packages/dashboard/src/handlers/*.test.ts`. Criterion #2 (test coverage for new event system). blockedBy: Build events TypeScript handler, API route, and ActivityFeed dashboard component | merged to main | merge conflict | 1 | fixed |
| 2026-02-19 | [TEST] Add mission-raw and pipeline-stream handler unit tests — create `packages/dashboard/src/handlers/mission-raw.test.ts`: test it reads and returns `.dev/mission.md` raw content, test missing file returns appropriate error/empty response, test response shape matches expected interface. Create `packages/dashboard/src/handlers/pipeline-stream.test.ts`: test SSE headers are set correctly (`text/event-stream`, `no-cache`), test file-watch setup is called (mock `fs.watch`), test stream sends data in SSE format (`data: {...}\n\n`), test cleanup on client disconnect. Follow existing handler test patterns. These are the last 2 untested handlers in the dashboard package. Criterion #2 (complete handler test coverage) | -- | Stale lock after 45m | 0 | superseded |
| 2026-02-19 | [TEST] Add mission-raw and pipeline-stream handler unit tests — create `packages/dashboard/src/handlers/mission-raw.test.ts`: test it reads and returns `.dev/mission.md` raw content, test missing file returns appropriate error/empty response, test response shape matches expected interface. Create `packages/dashboard/src/handlers/pipeline-stream.test.ts`: test SSE headers are set correctly (`text/event-stream`, `no-cache`), test file-watch setup is called (mock `fs.watch`), test stream sends data in SSE format (`data: {...}\n\n`), test cleanup on client disconnect. Follow existing handler test patterns. These are the last 2 untested handlers in the dashboard package. Criterion #2 (complete handler test coverage) | -- | Stale lock after 45m | 0 | superseded |
| 2026-02-19 | [TEST] Add mission-raw and pipeline-stream handler unit tests — create `packages/dashboard/src/handlers/mission-raw.test.ts`: test it reads and returns `.dev/mission.md` raw content, test missing file returns appropriate error/empty response, test response shape matches expected interface. Create `packages/dashboard/src/handlers/pipeline-stream.test.ts`: test SSE headers are set correctly (`text/event-stream`, `no-cache`), test file-watch setup is called (mock `fs.watch`), test stream sends data in SSE format (`data: {...}\n\n`), test cleanup on client disconnect. Follow existing handler test patterns. These are the last 2 untested handlers in the dashboard package. Criterion #2 (complete handler test coverage) | -- | Stale lock after 45m | 0 | superseded |
| 2026-02-19 | [FEAT] Add JSON output mode to `skynet status` for programmatic access — in `packages/cli/src/commands/status.ts`, add a `--json` boolean option. When set, instead of printing formatted text, collect all data into a structured object `{ project, paused, tasks: { pending, claimed, completed, failed }, workers: [...], healthScore, selfCorrectionRate, missionProgress: [...], lastActivity }` and output via `console.log(JSON.stringify(data, null, 2))`. This enables CI pipelines, monitoring scripts, and external tools to consume pipeline status programmatically. Also add `--quiet` flag that outputs only the health score number (for use in shell scripts: `if [ $(skynet status --quiet) -lt 50 ]; then alert; fi`). Criterion #1 (developer experience) and #5 (mission progress measurable from any context) | dev/add-json-output-mode-to-skynet-status-fo | merge conflict | 0 | superseded |
| 2026-02-19 | [FEAT] Wire emit_event() into bash scripts (1st attempt — SIGTERM) | dev/wire-emitevent-calls-into-dev-workersh-t | claude exit code 143 | 0 | superseded |
| 2026-02-19 | [FEAT] Wire emit_event() into bash scripts (2nd attempt) | dev/wire-emitevent-calls-into-dev-workersh-t | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [DOCS] Update README CLI reference with upgrade, run, watch | dev/update-readme-cli-reference-with-upgrade | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FEAT] Add `skynet metrics` CLI command | dev/counts-and-percentages-read-devfailed-ta | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [TEST] Add CLI unit tests for watch, run, upgrade, cleanup, metrics | dev/add-cli-unit-tests-for-watch-run-upgrade | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FEAT] Add `/admin/events` page with EventsDashboard | dev/add-adminevents-page-with-event-filterin | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [INFRA] Add pipeline performance summary to project-driver | dev/add-pipeline-performance-summary-to-proj | claude exit code 1 | 0 | superseded |
| 2026-02-19 | [FIX] Clean up stale failed-tasks.md entries | dev/clean-up-stale-failed-tasksmd-entries-an | claude exit code 1 | 0 | superseded |
| 2026-02-20 | [TEST] Add EventsDashboard component tests — create `packages/dashboard/src/components/EventsDashboard.test.tsx` using vitest + @testing-library/react. Test: renders event table from mock fetch data, filter dropdown filters by event type, search input filters by detail text, empty state shows appropriate message. Mock `fetch` globally with `vi.fn()`. Follow patterns in existing component tests like `PipelineDashboard.test.tsx`. Criterion #2. blockedBy: Add EventsDashboard component and `/admin/events` page | merged to main | merge conflict | 1 | fixed |
| 2026-02-20 | [FEAT] Add `echo` agent plugin for pipeline dry-run testing — create `scripts/agents/echo.sh` as a minimal agent plugin that echoes the task description back without calling any LLM. On `agent_run()`, create a single commit with a placeholder file containing the task description and "TODO: implement". On `agent_check()`, return success. This lets users run `SKYNET_AGENT_PLUGIN=echo skynet start` to test the full pipeline lifecycle (claim, branch, gate, merge) without burning LLM API tokens. Register in the agent selection logic in `scripts/_agent.sh`. Run `pnpm typecheck` and `bash -n scripts/agents/echo.sh`. Criterion #1 (faster pipeline verification during setup) and #6 (extensible to any agent) | dev/add-echo-agent-plugin-for-pipeline-dry-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Fix codex.sh to pipe prompt via stdin instead of CLI argument — in `scripts/agents/codex.sh` line 41, `_agent_exec $SKYNET_CODEX_BIN $SKYNET_CODEX_FLAGS $model_flag "$prompt"` passes the prompt as a CLI argument. `claude.sh` was already fixed to pipe via stdin to avoid ARG_MAX limits (~256KB per argument on macOS). For large task descriptions with extensive `SKYNET_WORKER_CONTEXT`, the codex agent will silently fail. Fix: change line 41 to `printf '%s\n' "$prompt" | fix/fix-codexsh-to-pipe-prompt-via-stdin-ins | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [FIX] Add missing `SKYNET_WATCHDOG_INTERVAL` and `SKYNET_ONE_SHOT` to config template — `SKYNET_WATCHDOG_INTERVAL` is used in `scripts/watchdog.sh` line 16 (`${SKYNET_WATCHDOG_INTERVAL:-180}`) and documented in `config.ts` KNOWN_VARS, but is NOT in `templates/skynet.config.sh`. Users cannot discover or tune watchdog dispatch frequency. `SKYNET_ONE_SHOT` is used in 5 places in `watchdog.sh` and 9 places in `dev-worker.sh` as a feature flag for single-task mode, but is completely undocumented. Fix: add to `templates/skynet.config.sh` before the closing comments: `export SKYNET_WATCHDOG_INTERVAL="180"` with comment "# Seconds between watchdog monitoring cycles" and `export SKYNET_ONE_SHOT=""` with comment "# Set to 1 for single-task mode (worker exits after one task)". Also add `SKYNET_ONE_SHOT` to `KNOWN_VARS` in `config.ts` with description "Run workers in single-task mode — exit after completing one task". Run `pnpm typecheck`. Criterion #1 (discoverable configuration — all tuning knobs must be in the template) | dev/add-missing-skynetwatchdoginterval-and-s | typecheck failed (fix attempt 1 failed) (fix attempt 2 failed) (fix attempt 3 failed) | 3 | blocked |
| 2026-02-20 | [FIX] Fix duplicate Activity icon for events page in admin navigation — in `packages/admin/src/app/admin/layout.tsx`, both `pipeline` (line 9) and `events` (line 17) use the `Activity` icon from lucide-react. This makes the sidebar navigation confusing — two identical icons for different pages. Fix: change the `events` entry to use the `ScrollText` icon (or `FileText`/`ListOrdered`), which better represents an event log/audit trail. Import `ScrollText` from `lucide-react` and update the icon property. Run `pnpm typecheck`. Criterion #4 (dashboard usability — distinct visual navigation) | dev/fix-duplicate-activity-icon-for-events-p | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add E2E tests for `skynet stop`, `skynet pause`/`resume`, and remaining CLI smoke tests — in `tests/e2e/cli-commands.test.sh`, the E2E suite covers init, add-task, status, doctor, config, export/import, but is missing critical operational commands. Add: (a) **stop**: create a mock PID lock directory for `dev-worker-3`, run `skynet stop`, verify it attempts to kill the correct PIDs and removes lock dirs (this catches the hardcoded worker list bug). (b) **pause/resume**: run `skynet pause`, verify `.dev/pipeline-paused` sentinel exists with correct JSON, run `skynet resume`, verify sentinel is removed. (c) **completions**: run `skynet completions bash`, verify output contains `complete -W` and all 26 command names. (d) **validate**: run `skynet validate`, verify it checks gates, git remote, disk space, and mission.md. These are the last untested CLI E2E workflows. Run `pnpm typecheck`. Criterion #2 (comprehensive E2E coverage — all operational commands tested) | dev/add-e2e-tests-for-skynet-stop-skynet-pau | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [TEST] Add E2E tests for `skynet stop`, `skynet pause`/`resume`, and remaining CLI smoke tests — in `tests/e2e/cli-commands.test.sh`, the E2E suite covers init, add-task, status, doctor, config, export/import, but is missing critical operational commands. Add: (a) **stop**: create a mock PID lock directory for `dev-worker-3`, run `skynet stop`, verify it attempts to kill the correct PIDs and removes lock dirs (this catches the hardcoded worker list bug). (b) **pause/resume**: run `skynet pause`, verify `.dev/pipeline-paused` sentinel exists with correct JSON, run `skynet resume`, verify sentinel is removed. (c) **completions**: run `skynet completions bash`, verify output contains `complete -W` and all 26 command names. (d) **validate**: run `skynet validate`, verify it checks gates, git remote, disk space, and mission.md. These are the last untested CLI E2E workflows. Run `pnpm typecheck`. Criterion #2 (comprehensive E2E coverage — all operational commands tested) | dev/add-e2e-tests-for-skynet-stop-skynet-pau | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [TEST] Add E2E tests for `skynet stop`, `skynet pause`/`resume`, and remaining CLI smoke tests — in `tests/e2e/cli-commands.test.sh`, the E2E suite covers init, add-task, status, doctor, config, export/import, but is missing critical operational commands. Add: (a) **stop**: create a mock PID lock directory for `dev-worker-3`, run `skynet stop`, verify it attempts to kill the correct PIDs and removes lock dirs (this catches the hardcoded worker list bug). (b) **pause/resume**: run `skynet pause`, verify `.dev/pipeline-paused` sentinel exists with correct JSON, run `skynet resume`, verify sentinel is removed. (c) **completions**: run `skynet completions bash`, verify output contains `complete -W` and all 26 command names. (d) **validate**: run `skynet validate`, verify it checks gates, git remote, disk space, and mission.md. These are the last untested CLI E2E workflows. Run `pnpm typecheck`. Criterion #2 (comprehensive E2E coverage — all operational commands tested) | dev/add-e2e-tests-for-skynet-stop-skynet-pau | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [FIX] Optimize pipeline-logs handler to avoid reading entire file for line count — in `packages/dashboard/src/handlers/pipeline-logs.ts` lines 96-97, `const content = readFileSync(logPath, "utf-8"); totalLines = content.split("\n").length;` reads the entire log file into memory just to count lines. For log files at the `SKYNET_MAX_LOG_SIZE_KB` limit (1 MB), this allocates and splits a 1 MB string on every API call to `/api/admin/pipeline/logs`. The response data (tail output) is already computed separately above. Fix: replace the full-file read with a streaming line counter: `let totalLines = 0; const buf = readFileSync(logPath); for (let i = 0; i < buf.length; i++) { if (buf[i] === 10) totalLines++; } totalLines++;`. This counts newlines without creating an array of substrings, reducing memory usage by ~4x for large files. Alternatively, since the `tail` offset is the primary use case, set `totalLines` to an estimate using `statSync(logPath).size / 80` (average line length) if exact count is not critical. Run `pnpm typecheck`. Criterion #3 (efficient API handlers — no unnecessary memory allocation) | dev/-10-totallines--totallines-this-counts-n | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [FIX] Extract duplicate `extractTitle` and `parseBlockedBy` to shared backlog-parser module — in `packages/dashboard/src/handlers/pipeline-status.ts` (lines 29, 39) and `packages/dashboard/src/handlers/tasks.ts` (lines 7, 20), `extractTitle()` and `parseBlockedBy()` are byte-for-byte identical copy-pastes. A third `parseBacklog()` exists independently in `packages/dashboard/src/lib/backlog-parser.ts` (already exported). Fix: (1) Move `extractTitle()` and `parseBlockedBy()` to `packages/dashboard/src/lib/backlog-parser.ts` alongside the existing `parseBacklog`. (2) Update `pipeline-status.ts` and `tasks.ts` to import from `../lib/backlog-parser` and delete their local copies. (3) If `tasks.ts` has a more feature-rich `parseBacklog` (with blocked-dependency resolution), consolidate into the shared version with an options parameter. Run `pnpm typecheck`. Criterion #3 (DRY — bug in title parsing must be fixable in one place) | fix/extract-duplicate-extracttitle-and-parse | typecheck failed after fix attempt 2 (fix attempt 3 failed) | 3 | blocked |
| 2026-02-20 | [FIX] Extract duplicate `extractTitle` and `parseBlockedBy` to shared backlog-parser module — in `packages/dashboard/src/handlers/pipeline-status.ts` (lines 29, 39) and `packages/dashboard/src/handlers/tasks.ts` (lines 7, 20), `extractTitle()` and `parseBlockedBy()` are byte-for-byte identical copy-pastes. A third `parseBacklog()` exists independently in `packages/dashboard/src/lib/backlog-parser.ts` (already exported). Fix: (1) Move `extractTitle()` and `parseBlockedBy()` to `packages/dashboard/src/lib/backlog-parser.ts` alongside the existing `parseBacklog`. (2) Update `pipeline-status.ts` and `tasks.ts` to import from `../lib/backlog-parser` and delete their local copies. (3) If `tasks.ts` has a more feature-rich `parseBacklog` (with blocked-dependency resolution), consolidate into the shared version with an options parameter. Run `pnpm typecheck`. Criterion #3 (DRY — bug in title parsing must be fixable in one place) | fix/extract-duplicate-extracttitle-and-parse | typecheck failed after fix attempt 2 (fix attempt 3 failed) | 3 | blocked |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` utilities to shared CLI module — `isProcessRunning()` is copy-pasted in 4 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `start.ts`) with minor signature variation. `readFile()` (a 3-line try/catch wrapper around `readFileSync`) is copy-pasted in 5 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `metrics.ts`, `cleanup.ts`). Fix: (1) Create `packages/cli/src/utils/readFile.ts` exporting `readFile(path: string): string` that returns empty string on error. (2) Create `packages/cli/src/utils/isProcessRunning.ts` exporting `isProcessRunning(lockPath: string): { running: boolean; pid: string }` supporting both dir-based and file-based locks. (3) Update all 9 files to import from the shared utils and delete their local copies. This follows the same DRY pattern used for `loadConfig.ts` (which eliminated 19 duplicates). Run `pnpm typecheck`. Criterion #3 (maintainable code — DRY principle) | fix/extract-duplicate-isprocessrunning-and-r | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` utilities to shared CLI module — `isProcessRunning()` is copy-pasted in 4 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `start.ts`) with minor signature variation. `readFile()` (a 3-line try/catch wrapper around `readFileSync`) is copy-pasted in 5 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `metrics.ts`, `cleanup.ts`). Fix: (1) Create `packages/cli/src/utils/readFile.ts` exporting `readFile(path: string): string` that returns empty string on error. (2) Create `packages/cli/src/utils/isProcessRunning.ts` exporting `isProcessRunning(lockPath: string): { running: boolean; pid: string }` supporting both dir-based and file-based locks. (3) Update all 9 files to import from the shared utils and delete their local copies. This follows the same DRY pattern used for `loadConfig.ts` (which eliminated 19 duplicates). Run `pnpm typecheck`. Criterion #3 (maintainable code — DRY principle) | fix/extract-duplicate-isprocessrunning-and-r | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` utilities to shared CLI module — `isProcessRunning()` is copy-pasted in 4 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `start.ts`) with minor signature variation. `readFile()` (a 3-line try/catch wrapper around `readFileSync`) is copy-pasted in 5 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `metrics.ts`, `cleanup.ts`). Fix: (1) Create `packages/cli/src/utils/readFile.ts` exporting `readFile(path: string): string` that returns empty string on error. (2) Create `packages/cli/src/utils/isProcessRunning.ts` exporting `isProcessRunning(lockPath: string): { running: boolean; pid: string }` supporting both dir-based and file-based locks. (3) Update all 9 files to import from the shared utils and delete their local copies. This follows the same DRY pattern used for `loadConfig.ts` (which eliminated 19 duplicates). Run `pnpm typecheck`. Criterion #3 (maintainable code — DRY principle) | fix/extract-duplicate-isprocessrunning-and-r | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [FIX] Fix dashboard typecheck — 35 fetch mock type errors blocking all worker merges — `pnpm typecheck` fails with TS2741 ("Property 'preconnect' is missing") and TS2352 (fetch-to-Mock cast error) in 13 dashboard component test files: `ActivityFeed.test.tsx`, `EventsDashboard.test.tsx`, `LogViewer.test.tsx`, `MissionDashboard.test.tsx`, `MonitoringDashboard.test.tsx`, `PipelineDashboard.test.tsx`, `PromptsDashboard.test.tsx`, `SettingsDashboard.test.tsx`, `SyncDashboard.test.tsx`, `TasksDashboard.test.tsx`, `WorkerScaling.test.tsx`. All errors come from `global.fetch = vi.fn().mockResolvedValue(...)` where the mock lacks the `preconnect` property added in newer Node.js/undici types. Fix: in each test file's `mockFetchWith()` or `beforeEach` block, replace direct `global.fetch = vi.fn()...` assignment with `vi.stubGlobal('fetch', vi.fn().mockResolvedValue(...))` which bypasses the type check on assignment. For places that cast `global.fetch as Mock`, change to `vi.mocked(global.fetch)`. Run `pnpm typecheck` — must exit cleanly. Criterion #2 (typecheck is the quality gate — 0 errors required for any worker to merge) | dev/fix-dashboard-typecheck--35-fetch-mock-t | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Improve watchdog auto-supersede to catch stale failed-tasks with title variations — in `scripts/watchdog.sh`, the `_auto_supersede_completed_tasks()` function uses exact title matching between `failed-tasks.md` and `completed.md`. When a task is completed via a "FRESH implementation" with a slightly different title, the original failed entry stays `pending` and the task-fixer wastes cycles retrying it. Fix: normalize both titles before comparison — strip tags (`[FIX]`, `[FEAT]`, etc.), strip "FRESH implementation" suffix, lowercase, collapse whitespace, and compare the first 50 characters. If a failed task's normalized title matches any completed task, supersede it. Currently 5 stale entries match this pattern. Run `pnpm typecheck`. Criterion #3 (no wasted fixer cycles on already-completed work) | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` utilities to shared CLI module — `isProcessRunning()` is copy-pasted in 4 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `start.ts`) with minor signature variation. `readFile()` (a 3-line try/catch wrapper around `readFileSync`) is copy-pasted in 5 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `metrics.ts`, `cleanup.ts`). Fix: (1) Create `packages/cli/src/utils/readFile.ts` exporting `readFile(path: string): string` that returns empty string on error. (2) Create `packages/cli/src/utils/isProcessRunning.ts` exporting `isProcessRunning(lockPath: string): { running: boolean; pid: string }` supporting both dir-based and file-based locks. (3) Update all 9 files to import from the shared utils and delete their local copies. This follows the same DRY pattern used for `loadConfig.ts` (which eliminated 19 duplicates). Run `pnpm typecheck`. Criterion #3 (maintainable code — DRY principle) | fix/extract-duplicate-isprocessrunning-and-r | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` utilities to shared CLI module — `isProcessRunning()` is copy-pasted in 4 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `start.ts`) with minor signature variation. `readFile()` (a 3-line try/catch wrapper around `readFileSync`) is copy-pasted in 5 CLI files (`doctor.ts`, `status.ts`, `watch.ts`, `metrics.ts`, `cleanup.ts`). Fix: (1) Create `packages/cli/src/utils/readFile.ts` exporting `readFile(path: string): string` that returns empty string on error. (2) Create `packages/cli/src/utils/isProcessRunning.ts` exporting `isProcessRunning(lockPath: string): { running: boolean; pid: string }` supporting both dir-based and file-based locks. (3) Update all 9 files to import from the shared utils and delete their local copies. This follows the same DRY pattern used for `loadConfig.ts` (which eliminated 19 duplicates). Run `pnpm typecheck`. Criterion #3 (maintainable code — DRY principle) | fix/extract-duplicate-isprocessrunning-and-r | typecheck failed after fix attempt 3 | 3 | blocked |
| 2026-02-20 | [FIX] Improve watchdog auto-supersede to catch stale failed-tasks with title variations — in `scripts/watchdog.sh`, the `_auto_supersede_completed_tasks()` function uses exact title matching between `failed-tasks.md` and `completed.md`. When a task is completed via a "FRESH implementation" with a slightly different title, the original failed entry stays `pending` and the task-fixer wastes cycles retrying it. Fix: normalize both titles before comparison — strip tags (`[FIX]`, `[FEAT]`, etc.), strip "FRESH implementation" suffix, lowercase, collapse whitespace, and compare the first 50 characters. If a failed task's normalized title matches any completed task, supersede it. Currently 5 stale entries match this pattern. Run `pnpm typecheck`. Criterion #3 (no wasted fixer cycles on already-completed work) | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Add `files` field and `prepublishOnly` script to dashboard package.json for correct npm publish — `packages/dashboard/package.json` has no `files` field, meaning `npm publish` includes test files, TypeScript source, devDependencies' artifacts — shipping a bloated, incorrect package. Also missing `prepublishOnly` script, so local `npm publish` would publish stale or missing `dist/`. Fix: (1) Add `"files": ["dist", "README.md"]` to `packages/dashboard/package.json`. (2) Add `"prepublishOnly": "tsc"` to the `scripts` block. (3) Verify with `pnpm --filter @ajioncorp/skynet pack` that the tarball contains only `dist/` and `README.md`, no `.test.ts` files. Run `pnpm typecheck`. Criterion #1 (working npm package — external consumers must receive compiled JS, not source TypeScript) | merged to main | typecheck failed after fix attempt 2 | 3 | fixed |
| 2026-02-20 | [FIX] Fix task POST handler to retry lock acquisition instead of immediate 423 failure — in `packages/dashboard/src/handlers/tasks.ts` lines 143-150, lock acquisition uses a single `mkdirSync(backlogLockPath)` with zero retry. If a shell worker holds the lock (even for 100ms during a claim), the dashboard API immediately returns HTTP 423 to the user. Shell scripts retry 50 times at 100ms intervals (5 seconds total). Fix: wrap the `mkdirSync` in an async retry loop: try up to 30 times with 100ms delay between attempts (`await new Promise(r => setTimeout(r, 100))`). If all retries fail, return 423 as before. Run `pnpm typecheck`. Criterion #4 (dashboard operations must actually work — adding tasks from the UI should not fail during normal pipeline activity) | dev/fix-task-post-handler-to-retry-lock-acqu | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Guard `skynet init` against re-run silently overwriting existing `skynet.config.sh` — in `packages/cli/src/commands/init.ts` line 179, `writeFileSync(join(devDir, "skynet.config.sh"), configContent)` unconditionally overwrites the config file. If a user accidentally re-runs `skynet init` in an already-initialized project, their customized config (port, notification tokens, agent settings) is silently destroyed. The `.md` state files are correctly guarded with `existsSync` checks, but the two shell config files are not. Fix: before writing `skynet.config.sh` (line 179) and `skynet.project.sh` (line 184), check `existsSync`. If the file exists AND `--force` is not set, print `"  Existing skynet.config.sh found — skipping (use --force to overwrite)"` and skip. Add `.option('--force', 'Overwrite existing config files')` to the init command options. Run `pnpm typecheck`. Criterion #1 (safe init — no accidental config destruction on re-run) | dev/guard-skynet-init-against-re-run-silentl | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Fix dashboard typecheck — 35 fetch mock type errors blocking all worker merges — `pnpm typecheck` fails with TS2741 ("Property 'preconnect' is missing") and TS2352 (fetch-to-Mock cast error) in 11 dashboard component test files: `ActivityFeed.test.tsx`, `EventsDashboard.test.tsx`, `LogViewer.test.tsx`, `MissionDashboard.test.tsx`, `MonitoringDashboard.test.tsx`, `PipelineDashboard.test.tsx`, `PromptsDashboard.test.tsx`, `SettingsDashboard.test.tsx`, `SyncDashboard.test.tsx`, `TasksDashboard.test.tsx`, `WorkerScaling.test.tsx`. All errors come from `global.fetch = vi.fn().mockResolvedValue(...)` where the mock lacks the `preconnect` property added in newer Node.js/undici types. Fix: in each test file's `mockFetchWith()` or `beforeEach` block, replace direct `global.fetch = vi.fn()...` assignment with `vi.stubGlobal('fetch', vi.fn().mockResolvedValue(...))` which bypasses the type check on assignment. For places that cast `global.fetch as Mock`, change to `vi.mocked(global.fetch)`. Also check `AdminLayout.test.tsx` and `SkynetProvider.test.tsx` for the same pattern. Run `pnpm typecheck` — must exit 0 with zero errors. Criterion #2 (typecheck is the quality gate — 0 errors required for any worker to merge) | dev/fix-dashboard-typecheck--35-fetch-mock-t | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Read `SKYNET_STALE_MINUTES` from config in pipeline-status handler and CLI status instead of hardcoding 45 — in `packages/dashboard/src/handlers/pipeline-status.ts` line 309, `staleThresholdMs` is hardcoded to `45 * 60 * 1000`. Same hardcoded value in `packages/cli/src/commands/status.ts` line 208. If a project sets `SKYNET_STALE_MINUTES=30`, the dashboard still shows workers as "healthy" for 45 minutes while the watchdog kills them at 30. Fix: in `pipeline-status.ts`, read `SKYNET_STALE_MINUTES` from the config file and use `(parseInt(staleMinutes) | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Add `SKYNET_INSTALL_CMD` config variable for non-pnpm projects — in `scripts/dev-worker.sh` lines 237 and 525, `pnpm install --frozen-lockfile` is hardcoded. In `scripts/task-fixer.sh` line 64, same. Non-pnpm projects (npm, yarn, bun) cannot run the pipeline without manually editing scripts. Fix: (1) Add `export SKYNET_INSTALL_CMD="pnpm install --frozen-lockfile"` to `templates/skynet.config.sh` with comment `# Package install command — change for npm/yarn/bun projects`. (2) In `dev-worker.sh` and `task-fixer.sh`, replace hardcoded `pnpm install --frozen-lockfile` with `eval "${SKYNET_INSTALL_CMD:-pnpm install --frozen-lockfile}"`. (3) Add `SKYNET_INSTALL_CMD: "Package install command run before quality gates (default: pnpm install --frozen-lockfile)"` to `KNOWN_VARS` in `config.ts`. Run `pnpm typecheck`. Criterion #1 (works with any project) and #6 (extensibility) | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Fix Node.js version prerequisite mismatch in README — root `README.md` line 18 states "Node.js 18+" as a prerequisite, but both `packages/cli/package.json` and `packages/dashboard/package.json` declare `"engines": { "node": ">=20" }`. Users on Node 18/19 will hit runtime failures with native `fetch`, `fs.statfs`, and `ReadableStream` features that require Node 20+. Fix: change "Node.js 18+" to "Node.js 20+" in `README.md` (lines 18 and 185). Run `pnpm typecheck`. Criterion #1 (accurate documentation prevents setup confusion) | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [FIX] Read `SKYNET_STALE_MINUTES` from config in pipeline-status handler and CLI status instead of hardcoding 45 — in `packages/dashboard/src/handlers/pipeline-status.ts` line 309, `staleThresholdMs` is hardcoded to `45 * 60 * 1000`. Same hardcoded value in `packages/cli/src/commands/status.ts` line 208. If a project sets `SKYNET_STALE_MINUTES=30`, the dashboard still shows workers as "healthy" for 45 minutes while the watchdog kills them at 30. Fix: in `pipeline-status.ts`, read `SKYNET_STALE_MINUTES` from the config file and use `(parseInt(staleMinutes) | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Fix Node.js version prerequisite mismatch in README — root `README.md` line 18 states "Node.js 18+" as a prerequisite, but both `packages/cli/package.json` and `packages/dashboard/package.json` declare `"engines": { "node": ">=20" }`. Users on Node 18/19 will hit runtime failures with native `fetch`, `fs.statfs`, and `ReadableStream` features that require Node 20+. Fix: change "Node.js 18+" to "Node.js 20+" in `README.md` (lines 18 and 185). Run `pnpm typecheck`. Criterion #1 (accurate documentation prevents setup confusion) | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [FIX] Supersede 21 stale `pending` entries in `failed-tasks.md` for already-completed tasks — the improved `_auto_supersede_completed_tasks()` with fuzzy title normalization is implemented but uncommitted in watchdog.sh. Once the commit task above is completed, the next watchdog run should auto-supersede most entries. If auto-supersede still misses entries, manually mark remaining stale entries from `pending` to `superseded` using `sed_inplace`: match entries whose branch names correspond to tasks already `[x]` in the backlog or present in completed.md. The 21 pending entries include: isProcessRunning DRY (5 duplicates!), E2E tests (3 duplicates), extractTitle DRY (2), auto-supersede fuzzy (2), STALE_MINUTES (2), Node.js README (2), codex.sh stdin (1), config template (1), pipeline-logs (1), files field (1), INSTALL_CMD (1). At least 12 of these are for already-completed work and should be superseded immediately. Run `pnpm typecheck`. Criterion #3 (clean state — no wasted fixer cycles on already-completed work) | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [FIX] Read `SKYNET_STALE_MINUTES` from config in `status.ts`, `watch.ts`, and `pipeline-status.ts` instead of hardcoding 45 — in `packages/cli/src/commands/status.ts` line 185, `packages/cli/src/commands/watch.ts` line 68, and `packages/dashboard/src/handlers/pipeline-status.ts` line 309, `staleThresholdMs` is hardcoded to `45 * 60 * 1000`. If a user sets `SKYNET_STALE_MINUTES=90` in config, these components still use 45 minutes while the watchdog honors the configured value. Compare with `doctor.ts` line 477 which correctly reads from config. Fix: in `status.ts` and `watch.ts`, change to `const staleMinutes = Number(vars?.SKYNET_STALE_MINUTES) | merged to main | 45; const staleThresholdMs = staleMinutes * 60 * 1000;` where `vars` comes from `loadConfig()`. In `pipeline-status.ts`, read the config file and extract `SKYNET_STALE_MINUTES` similarly. Run `pnpm typecheck`. Criterion #3 (consistent behavior — all components must honor configuration) | 1 | fixed |
| 2026-02-20 | [INFRA] Commit and verify orphaned `main` working-tree fixes from killed workers — inspect `git status`, split changes into coherent commits (watchdog auto-supersede normalization, CLI DRY utils, config template/install command, E2E updates), run `pnpm typecheck`, and merge to `main` so pending failed-task retries can supersede correctly. Mission: Criterion #3 reliability and self-correction throughput. | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [FIX] Patch shell injection risk in `skynet config set` — in `packages/cli/src/commands/config.ts`, remove shell-interpolated `execSync` paths for user-provided key/value writes, validate `SKYNET_*` key format, and write via safe file mutation only. Add unit tests for malicious values containing shell metacharacters. Mission: Criterion #1 safe adoption and Criterion #3 reliability. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Make stale heartbeat threshold config-consistent everywhere — in `packages/cli/src/commands/status.ts`, `packages/cli/src/commands/watch.ts`, and `packages/dashboard/src/handlers/pipeline-status.ts`, read `SKYNET_STALE_MINUTES` from config instead of hardcoded `45`. Run `pnpm typecheck`. Mission: Criterion #3 consistency and Criterion #4 dashboard accuracy. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Align watchdog health score math with CLI/dashboard — update `scripts/watchdog.sh` health alert scoring to include the same stale-task-age deduction used by `status.ts` and `pipeline-status.ts`, then log component breakdown (`failed`, `blockers`, `staleHeartbeats`, `staleTasks24h`) for debuggability. Mission: Criterion #4 visibility consistency. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Drain stale `pending` retries in `failed-tasks.md` after supersede normalization lands — run one cleanup pass that marks already-completed duplicates as `superseded`, dedupes repeated rows by normalized title+branch, and emits `task_superseded` events for each transition. Mission: Criterion #2 self-correction and Criterion #3 wasted-cycle elimination. | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [FIX] Finish Codex large-prompt reliability path — in `scripts/agents/codex.sh`, pass prompts via stdin (or temp-file fallback if stdin unsupported), preserve exit codes, and add `bash -n` validation plus a regression test for >300KB prompt payloads. Mission: Criterion #6 multi-agent compatibility. | merged to main | typecheck failed after fix attempt 2 | 3 | fixed |
| 2026-02-20 | [TEST] Add regression coverage for stale-threshold + health-score parity — add CLI/dashboard tests confirming the same config and deductions drive `status`, `watch`, `pipeline-status`, and watchdog alert thresholds. Mission: Criterion #2 quality gates and Criterion #4 trustworthy telemetry. | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [FIX] Consolidate duplicate pending failed-task entries at write time in `task-fixer.sh` — before appending a new failed row, detect an existing `pending` row with same normalized title and update attempts/error instead of inserting duplicates. Mission: Criterion #3 clean state and fixer efficiency. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [INFRA] Add project-driver guardrail when backlog is empty but retries exist — in `scripts/project-driver.sh`, if pending backlog is 0 and `failed-tasks.md` has `status=pending`, generate recovery tasks instead of idle exit; emit event `driver_recovery_tasks_generated`. Mission: Criterion #2 self-correction loop continuity. | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [DOCS] Add a concise “Mission Achieved / Hardening Phase” operator note to README — document current success criteria status, remaining hardening priorities (security, consistency, dedupe), and expected runbook when pending backlog hits zero with non-zero failed retries. Mission: Criterion #1 adoption clarity and Criterion #5 measurable progress. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [INFRA] Land orphaned main working-tree fixes with clean commits — review current `git status` on `main`, split the uncommitted hardening changes into coherent commits (CLI DRY utils, watchdog supersede normalization, config/install updates, E2E updates), run `pnpm typecheck`, and push so watchdog/task-fixer can consume them. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Remove shell-eval injection path from `skynet config set` — in `packages/cli/src/commands/config.ts`, replace shell-interpolated `execSync` writes with safe in-process file mutation, validate keys with strict `^SKYNET_[A-Z0-9_]+$`, and add tests for metacharacter payloads. Mission: Criterion #1 safe adoption and Criterion #3 reliability. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Unify stale-threshold config usage across CLI + dashboard + watchdog math — make `status.ts`, `watch.ts`, `pipeline-status.ts`, and `scripts/watchdog.sh` all use `SKYNET_STALE_MINUTES` plus identical stale deductions (`staleHeartbeats`, `staleTasks24h`) and emit a scoring breakdown log. Mission: Criterion #4 telemetry consistency and Criterion #3 deterministic behavior. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Remove shell-eval injection path from `skynet config set` — in `packages/cli/src/commands/config.ts`, replace shell-interpolated `execSync` writes with safe in-process file mutation, validate keys with strict `^SKYNET_[A-Z0-9_]+$`, and add tests for metacharacter payloads. Mission: Criterion #1 safe adoption and Criterion #3 reliability. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Unify stale-threshold config usage across CLI + dashboard + watchdog math — make `status.ts`, `watch.ts`, `pipeline-status.ts`, and `scripts/watchdog.sh` all use `SKYNET_STALE_MINUTES` plus identical stale deductions (`staleHeartbeats`, `staleTasks24h`) and emit a scoring breakdown log. Mission: Criterion #4 telemetry consistency and Criterion #3 deterministic behavior. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Run one-time failed-task normalization and supersede sweep — add a scripted cleanup pass in `scripts/watchdog.sh` (or companion helper) that dedupes repeated `pending` rows by normalized title+branch, marks already-completed work as `superseded`, and emits `task_superseded` for each transition. Mission: Criterion #2 self-correction and Criterion #3 wasted-cycle elimination. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Run one-time failed-task normalization and supersede sweep — add a scripted cleanup pass in `scripts/watchdog.sh` (or companion helper) that dedupes repeated `pending` rows by normalized title+branch, marks already-completed work as `superseded`, and emits `task_superseded` for each transition. Mission: Criterion #2 self-correction and Criterion #3 wasted-cycle elimination. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Prevent duplicate pending rows at write time in `scripts/task-fixer.sh` — before appending to `failed-tasks.md`, detect an existing matching normalized `pending` entry and update attempts/error in place instead of inserting a new row. Mission: Criterion #3 clean state and fixer efficiency. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Prevent duplicate pending rows at write time in `scripts/task-fixer.sh` — before appending to `failed-tasks.md`, detect an existing matching normalized `pending` entry and update attempts/error in place instead of inserting a new row. Mission: Criterion #3 clean state and fixer efficiency. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Finish Codex large-prompt path with exit-code preservation — in `scripts/agents/codex.sh`, pass prompts via stdin (with temp-file fallback only if required), preserve child exit codes, run `bash -n`, and add regression coverage for >300KB prompt payloads. Mission: Criterion #6 multi-agent compatibility. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [TEST] Add parity regression tests for stale threshold and health score — add/extend tests in CLI and dashboard packages to prove identical behavior for `status`, `watch`, `pipeline-status`, and watchdog alert scoring against shared config inputs. Mission: Criterion #2 quality gates and Criterion #4 trustworthy visibility. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [INFRA] Add backlog-empty recovery generation in `scripts/project-driver.sh` — when backlog pending count is zero but `failed-tasks.md` contains `status=pending`, generate recovery tasks instead of idling and emit `driver_recovery_tasks_generated`. Mission: Criterion #2 self-correction loop continuity. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [INFRA] Re-open hardening commit sweep on `main` — inspect current `git status`, split orphaned working-tree changes into coherent commits (CLI DRY utils, watchdog supersede normalization, config/install updates, E2E updates), run `pnpm typecheck`, and push. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Re-open stale-threshold parity across CLI/dashboard/watchdog — make `status.ts`, `watch.ts`, `pipeline-status.ts`, and `scripts/watchdog.sh` all read `SKYNET_STALE_MINUTES` and use identical deductions (`staleHeartbeats`, `staleTasks24h`) with score breakdown logging. Mission: Criterion #4 telemetry consistency and Criterion #3 deterministic behavior. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Re-open `skynet config set` shell injection fix — in `packages/cli/src/commands/config.ts`, remove any shell-interpolated write path, enforce `^SKYNET_[A-Z0-9_]+$`, and add metacharacter regression tests. Mission: Criterion #1 safe adoption and Criterion #3 reliability. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Re-open duplicate pending write prevention in `scripts/task-fixer.sh` — before appending to `failed-tasks.md`, update matching normalized `pending` entries in place (attempts/error) instead of inserting duplicates. Mission: Criterion #3 clean state and fixer efficiency. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Re-open failed-task normalization and supersede sweep — add/verify one cleanup pass in `scripts/watchdog.sh` (or helper) that dedupes repeated `pending` rows by normalized title+branch, supersedes already-completed work, and emits `task_superseded` events per transition. Mission: Criterion #2 self-correction and Criterion #3 wasted-cycle elimination. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Re-open failed-task normalization and supersede sweep — add/verify one cleanup pass in `scripts/watchdog.sh` (or helper) that dedupes repeated `pending` rows by normalized title+branch, supersedes already-completed work, and emits `task_superseded` events per transition. Mission: Criterion #2 self-correction and Criterion #3 wasted-cycle elimination. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Re-open `skynet config set` shell injection fix — in `packages/cli/src/commands/config.ts`, remove any shell-interpolated write path, enforce `^SKYNET_[A-Z0-9_]+$`, and add metacharacter regression tests. Mission: Criterion #1 safe adoption and Criterion #3 reliability. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Re-open Codex large-prompt reliability path — in `scripts/agents/codex.sh`, pass prompts via stdin (temp-file fallback only if required), preserve child exit codes, run `bash -n`, and add >300KB prompt regression coverage. Mission: Criterion #6 multi-agent compatibility. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [TEST] Re-open parity regression coverage for stale-threshold and health-score math — extend CLI/dashboard tests to prove `status`, `watch`, `pipeline-status`, and watchdog alert scoring stay aligned under shared config inputs. Mission: Criterion #2 quality gates and Criterion #4 trustworthy visibility. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Unify stale-threshold and health-score math across CLI/dashboard/watchdog — ensure `status.ts`, `watch.ts`, `pipeline-status.ts`, and `scripts/watchdog.sh` all read `SKYNET_STALE_MINUTES`, apply identical deductions (`failed`, `blockers`, `staleHeartbeats`, `staleTasks24h`), and log a score breakdown. Mission: Criterion #4 telemetry consistency and Criterion #3 deterministic behavior. | merged to main | typecheck failed after fix attempt 2 | 3 | fixed |
| 2026-02-20 | [INFRA] Land orphaned `main` hardening changes with clean commit split — inspect `git status` on `main`, group uncommitted fixes into coherent commits (CLI DRY utils, watchdog supersede normalization, config/install updates, E2E), run `pnpm typecheck`, and push so watchdog/task-fixer can consume them. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Remove shell-execution path from `skynet config set` — in `packages/cli/src/commands/config.ts`, replace any `execSync`-based write path with in-process file mutation, enforce `^SKYNET_[A-Z0-9_]+$`, and add metacharacter regression tests. Mission: Criterion #1 safe adoption and Criterion #3 reliability. | dev/remove-shell-execution-path-from-skynet- | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Add canonical failed-task reconciliation pass in watchdog — before fixer dispatch in `scripts/watchdog.sh`, run one idempotent pass that dedupes `failed-tasks.md` `pending` rows by normalized title+branch, supersedes entries matching completed work, and emits `task_superseded` events per transition. Mission: Criterion #2 self-correction and Criterion #3 wasted-cycle elimination. | dev/add-canonical-failed-task-reconciliation | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Remove shell-execution path from `skynet config set` — in `packages/cli/src/commands/config.ts`, replace any `execSync`-based write path with in-process file mutation, enforce `^SKYNET_[A-Z0-9_]+$`, and add metacharacter regression tests. Mission: Criterion #1 safe adoption and Criterion #3 reliability. | dev/remove-shell-execution-path-from-skynet- | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Add canonical failed-task reconciliation pass in watchdog — before fixer dispatch in `scripts/watchdog.sh`, run one idempotent pass that dedupes `failed-tasks.md` `pending` rows by normalized title+branch, supersedes entries matching completed work, and emits `task_superseded` events per transition. Mission: Criterion #2 self-correction and Criterion #3 wasted-cycle elimination. | dev/add-canonical-failed-task-reconciliation | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Land orphaned `main` hardening changes with clean commit split — inspect `git status` on `main`, group uncommitted fixes into coherent commits (CLI DRY utils, watchdog supersede normalization, config/install updates, E2E), run `pnpm typecheck`, and push so watchdog/task-fixer can consume them. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [FIX] Prevent duplicate `pending` failed rows at write-time in `task-fixer.sh` — when a normalized pending match already exists, update attempts/error in place instead of appending a new row. Mission: Criterion #3 clean state and fixer efficiency. | dev/prevent-duplicate-pending-failed-rows-at | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Complete Codex large-prompt reliability path — in `scripts/agents/codex.sh`, pass prompts via stdin (temp-file fallback only if required), preserve child exit codes, add `bash -n` validation, and include >300KB prompt regression coverage. Mission: Criterion #6 multi-agent compatibility. | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [TEST] Add parity regression coverage for stale-threshold + health-score alignment — extend CLI/dashboard/shell tests to prove the same config and deductions drive `status`, `watch`, `pipeline-status`, and watchdog alert scoring. Mission: Criterion #2 quality gates and Criterion #4 trustworthy visibility. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [TEST] Re-open CLI E2E smoke coverage for operational commands — in `tests/e2e/cli-commands.test.sh`, add deterministic tests for `skynet stop`, `pause/resume`, `completions bash`, and `validate`; ensure suite passes with `pnpm typecheck`. Mission: Criterion #2 comprehensive quality gates. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [INFRA] Add project-driver recovery generation when backlog is empty but retries exist — in `scripts/project-driver.sh`, if pending backlog is 0 and `failed-tasks.md` still has `status=pending`, generate recovery tasks and emit `driver_recovery_tasks_generated`. Mission: Criterion #2 self-correction loop continuity. | merged to main | typecheck failed after fix attempt 2 | 3 | fixed |
| 2026-02-20 | [DOCS] Add hardening-phase operator runbook to README — document current 6/6 mission status, remaining hardening priorities (security/consistency/dedupe), and expected runbook for `backlog=0` with non-zero pending retries. Mission: Criterion #1 adoption clarity and Criterion #5 measurable progress. | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [NMI] Triage blocked retries with failed 3-attempt loops — for blocked entries in `.dev/failed-tasks.md`, capture exact failing `pnpm typecheck` diagnostics and split each into one minimal reproducible follow-up task before re-queueing. Mission: Criterion #2 self-correction closure. | merged to main | claude exit code 1 | 1 | fixed |
| 2026-02-20 | [INFRA] Land orphaned `main` hardening sweep with coherent commits — inspect `git status` on `main`, split orphaned working-tree changes into atomic commits (CLI DRY utils, watchdog supersede normalization, config/install updates, E2E updates), run `pnpm typecheck`, and push so watchdog/task-fixer consume the fixes. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [INFRA] Run one-time failed-task cleanup after reconciliation lands — execute a scripted cleanup over `.dev/failed-tasks.md` to supersede already-completed duplicates, collapse repeated pending rows, and verify pending retry count drops materially without losing true open failures. Mission: Criterion #2 loop efficiency and Criterion #3 state convergence. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [TEST] Add stale-threshold and health-score parity regression coverage — add CLI/dashboard/shell tests proving `status`, `watch`, `pipeline-status`, and watchdog scoring stay aligned under shared config inputs. Mission: Criterion #2 quality gates and Criterion #4 trustworthy visibility. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Prevent duplicate pending failed rows at write-time in `task-fixer.sh` — before append, detect normalized pending match and update attempts/error in place instead of inserting a new row. Mission: Criterion #3 clean state and fixer efficiency. | dev/prevent-duplicate-pending-failed-rows-at | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Prevent duplicate pending failed rows at write-time in `task-fixer.sh` — before append, detect normalized pending match and update attempts/error in place instead of inserting a new row. Mission: Criterion #3 clean state and fixer efficiency. | dev/prevent-duplicate-pending-failed-rows-at | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Restore config template parity for watchdog/one-shot knobs — ensure `templates/skynet.config.sh` includes `SKYNET_WATCHDOG_INTERVAL` and `SKYNET_ONE_SHOT`, and `packages/cli/src/commands/config.ts` `KNOWN_VARS` descriptions remain in sync. Mission: Criterion #1 discoverability and Criterion #3 consistent runtime behavior. | dev/restore-config-template-parity-for-watch | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add stale-threshold and health-score parity regression coverage — add CLI/dashboard/shell tests proving `status`, `watch`, `pipeline-status`, and watchdog scoring stay aligned under shared config inputs. Mission: Criterion #2 quality gates and Criterion #4 trustworthy visibility. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [TEST] Re-open CLI operational E2E smoke coverage — extend `tests/e2e/cli-commands.test.sh` with deterministic checks for `skynet stop`, `pause/resume`, `completions bash`, and `validate`; keep suite green with `pnpm typecheck`. Mission: Criterion #2 comprehensive quality gates. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Optimize pipeline logs line counting without full string split — in `packages/dashboard/src/handlers/pipeline-logs.ts`, replace `readFileSync(..., 'utf-8').split('\n')` counting with buffer newline counting to avoid avoidable memory churn per request; keep response shape unchanged. Mission: Criterion #3 efficient runtime behavior. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [INFRA] Land orphaned `main` hardening changes with atomic commits — inspect `git status`, split orphaned working-tree changes into coherent commits (security fix, stale-threshold parity, failed-task reconciliation, test coverage), run `pnpm typecheck`, and push so watchdog/task-fixer consume the fixes. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | merged to main | typecheck failed after fix attempt 1 | 2 | fixed |
| 2026-02-20 | [INFRA] Add backlog-empty recovery generation in `scripts/project-driver.sh` — when pending backlog is 0 but `failed-tasks.md` still has `status=pending`, generate recovery tasks and emit `driver_recovery_tasks_generated`. Mission: Criterion #2 self-correction loop continuity. | dev/add-backlog-empty-recovery-generation-in | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Prevent duplicate pending failed rows at write-time in `scripts/task-fixer.sh` — when a normalized pending match exists, update attempts/error in place instead of appending. Mission: Criterion #3 clean state and fixer efficiency. | dev/prevent-duplicate-pending-failed-rows-at | typecheck failed | 0 | superseded |
| 2026-02-20 | [NMI] Triage blocked retries with failed 3-attempt loops — capture exact failing diagnostics for blocked retries (`codex prompt path`, `config template parity`, `CLI E2E smoke`) and split each into one minimal reproducible follow-up task before re-queueing. Mission: Criterion #2 self-correction closure. | dev/triage-blocked-retries-with-failed-3-att | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Prevent duplicate pending failed rows at write-time in `scripts/task-fixer.sh` — when a normalized pending match exists, update attempts/error in place instead of appending. Mission: Criterion #3 clean state and fixer efficiency. | dev/prevent-duplicate-pending-failed-rows-at | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` to shared CLI utils — centralize helpers in `packages/cli/src/utils/` and update `doctor.ts`, `status.ts`, `watch.ts`, `start.ts`, `metrics.ts`, and `cleanup.ts` imports with compatibility for dir/file locks. Mission: Criterion #3 maintainability and reliability. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [NMI] Triage blocked retries with failed 3-attempt loops — capture exact failing diagnostics for blocked retries (`codex prompt path`, `config template parity`, `CLI E2E smoke`) and split each into one minimal reproducible follow-up task before re-queueing. Mission: Criterion #2 self-correction closure. | dev/triage-blocked-retries-with-failed-3-att | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Land orphaned `main` hardening changes with atomic commits — on `main`, commit currently uncommitted hardening work in coherent slices (security fix, stale-threshold parity, failed-task reconciliation, test updates), run `pnpm typecheck`, and push so watchdog/task-fixer can consume it. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | dev/land-orphaned-main-hardening-changes-wit | claude exit code 1 | 0 | superseded |
| 2026-02-20 | [INFRA] Land orphaned `main` hardening changes with atomic commits — on `main`, commit currently uncommitted hardening work in coherent slices (security fix, stale-threshold parity, failed-task reconciliation, test updates), run `pnpm typecheck`, and push so watchdog/task-fixer can consume it. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | dev/land-orphaned-main-hardening-changes-wit | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Remove shell-execution path from `skynet config set` — in `packages/cli/src/commands/config.ts`, replace any `execSync` write path with in-process file mutation, enforce `^SKYNET_[A-Z0-9_]+$`, and add metacharacter regression tests. Mission: Criterion #1 safe adoption and Criterion #3 reliability. | dev/remove-shell-execution-path-from-skynet- | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unify stale-threshold and health-score math across CLI/dashboard/watchdog — align `status.ts`, `watch.ts`, `pipeline-status.ts`, and `scripts/watchdog.sh` to shared `SKYNET_STALE_MINUTES` and identical deductions (`failed`, `blockers`, `staleHeartbeats`, `staleTasks24h`) with score-breakdown logging. Mission: Criterion #4 telemetry consistency and Criterion #3 deterministic behavior. | dev/unify-stale-threshold-and-health-score-m | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unify stale-threshold and health-score math across CLI/dashboard/watchdog — align `status.ts`, `watch.ts`, `pipeline-status.ts`, and `scripts/watchdog.sh` to shared `SKYNET_STALE_MINUTES` and identical deductions (`failed`, `blockers`, `staleHeartbeats`, `staleTasks24h`) with score-breakdown logging. Mission: Criterion #4 telemetry consistency and Criterion #3 deterministic behavior. | dev/unify-stale-threshold-and-health-score-m | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add parity regression coverage for stale-threshold and health-score alignment — extend CLI/dashboard/shell tests proving shared config and deductions drive `status`, `watch`, `pipeline-status`, and watchdog alert scoring identically. Mission: Criterion #2 quality gates and Criterion #4 trustworthy visibility. | dev/add-parity-regression-coverage-for-stale | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Land orphaned `main` hardening changes with atomic commits — on `main`, commit the current uncommitted hardening work in coherent slices (config-set security, stale-threshold parity, failed-task reconciliation, E2E/test updates), run `pnpm typecheck`, and push so watchdog/task-fixer can consume the fixes. Mission: Criterion #3 reliability and Criterion #2 self-correction throughput. | dev/land-orphaned-main-hardening-changes-wit | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Extract duplicate `isProcessRunning` and `readFile` to shared CLI utils — centralize helpers in `packages/cli/src/utils/` and update `doctor.ts`, `status.ts`, `watch.ts`, `start.ts`, `metrics.ts`, and `cleanup.ts` imports with compatibility for dir/file locks. Mission: Criterion #3 maintainability and reliability. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Optimize pipeline logs line counting without full string split — in `packages/dashboard/src/handlers/pipeline-logs.ts`, replace `readFileSync(..., 'utf-8').split('\n')` counting with buffer newline counting while keeping response shape unchanged. Mission: Criterion #3 efficient runtime behavior. | dev/optimize-pipeline-logs-line-counting-wit | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Add canonical failed-task reconciliation in watchdog — before fixer dispatch in `scripts/watchdog.sh`, run one idempotent pass that dedupes `failed-tasks.md` pending rows by normalized title+branch, supersedes entries matching completed work, and emits `task_superseded` events per transition. Mission: Criterion #2 self-correction and Criterion #3 wasted-cycle elimination. | dev/add-canonical-failed-task-reconciliation | typecheck failed | 0 | superseded |
| 2026-02-20 | [NMI] Triage blocked 3-attempt retry loops into minimal follow-ups — capture exact failing `pnpm typecheck` diagnostics for blocked items (Codex stdin path, config template parity, CLI E2E smoke, pipeline-logs optimization, backlog-parser DRY), then split each into one smallest reproducible fix task before re-queueing. Mission: Criterion #2 self-correction closure. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Add `SKYNET_INSTALL_CMD` support for non-pnpm projects — update `templates/skynet.config.sh`, `scripts/dev-worker.sh`, `scripts/task-fixer.sh`, and `packages/cli/src/commands/config.ts` `KNOWN_VARS` so install command is configurable (npm/yarn/bun). Mission: Criterion #1 portability and Criterion #6 extensibility. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Optimize pipeline-logs line counting without full string split — in `packages/dashboard/src/handlers/pipeline-logs.ts`, replace string-split line counting with buffer newline counting while keeping response shape unchanged and typecheck green. Mission: Criterion #3 efficient runtime behavior. | dev/optimize-pipeline-logs-line-counting-wit | typecheck failed | 0 | superseded |
| 2026-02-20 | [NMI] Triage blocked 3-attempt retry loops into minimal reproducible follow-ups — capture exact `pnpm typecheck` diagnostics for blocked roots (`codex` prompt path, config template parity, CLI operational E2E, pipeline-logs optimization, backlog-parser DRY), then create one smallest actionable follow-up per root cause and supersede duplicate variants. Mission: Criterion #2 self-correction closure. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Unify stale-threshold and health-score parity across CLI/dashboard/watchdog — align `packages/cli/src/commands/status.ts`, `packages/cli/src/commands/watch.ts`, `packages/dashboard/src/handlers/pipeline-status.ts`, and `scripts/watchdog.sh` to shared `SKYNET_STALE_MINUTES` input and identical deductions (`failed`, `blockers`, `staleHeartbeats`, `staleTasks24h`) with score-breakdown logging. Mission: Criterion #4 telemetry consistency and Criterion #3 deterministic behavior. | dev/unify-stale-threshold-and-health-score-p | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Enforce duplicate-pending prevention at write-time in `task-fixer.sh` — before append to `.dev/failed-tasks.md`, update attempts/error on normalized pending match instead of inserting a new row; verify behavior with repeated retries on same task title/branch. Mission: Criterion #3 clean state and fixer efficiency. | dev/enforce-duplicate-pending-prevention-at- | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Extract backlog title/blockedBy parsing into one shared parser — move duplicated `extractTitle()` and `parseBlockedBy()` from `packages/dashboard/src/handlers/pipeline-status.ts` and `packages/dashboard/src/handlers/tasks.ts` into `packages/dashboard/src/lib/backlog-parser.ts`, then update imports and keep behavior parity. Mission: Criterion #3 maintainability and deterministic parsing. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [NMI] Canonicalize blocked retry roots from `.dev/failed-tasks.md` — parse all `status=blocked` and `attempts>=3` rows, capture exact `pnpm typecheck` diagnostics from corresponding worker/fixer logs, and emit exactly one canonical follow-up task per root cause (Codex prompt path, config parity, CLI E2E, pipeline-logs, parser DRY). Mission: Criterion #2 self-correction closure and Criterion #3 convergent state. | dev/canonicalize-blocked-retry-roots-from-de | claude exit code 1 | 0 | superseded |
| 2026-02-20 | [FIX] Make pipeline-logs line counting optimization pass typecheck — in `packages/dashboard/src/handlers/pipeline-logs.ts`, keep buffer newline counting without string split, preserve response shape exactly, and add/update tests for empty file/no trailing newline behavior. Mission: Criterion #3 runtime efficiency. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Stabilize Codex large-prompt path with deterministic exit-code preservation — in `scripts/agents/codex.sh`, force stdin-first prompt delivery with temp-file fallback only when required, preserve child exit codes through `_agent_exec`, add `bash -n` and >300KB regression coverage in shell tests. Mission: Criterion #6 multi-agent compatibility and Criterion #3 reliability. | dev/stabilize-codex-large-prompt-path-with-d | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Complete CLI process/file helper DRY extraction with lock-compat coverage — finalize shared `readFile` and `isProcessRunning` utilities across CLI commands, including dir-lock and file-lock compatibility tests to prevent regressions. Mission: Criterion #3 maintainability and Criterion #1 reliability. | dev/complete-cli-processfile-helper-dry-extr | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Harden project-driver canonicalization rules in `scripts/project-driver.sh` prompt — explicitly require one durable root-cause task title, forbid “re-open” variants when canonical exists, and require superseding duplicates instead of generating parallel retries. Mission: Criterion #3 convergent planning and Criterion #2 self-correction throughput. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Stabilize Codex large-prompt path with deterministic exit-code preservation — in `scripts/agents/codex.sh`, enforce stdin-first prompt delivery with temp-file fallback only when required, preserve child exit codes through `_agent_exec`, and add `bash -n` plus >300KB regression coverage. Mission: Criterion #6 multi-agent compatibility and Criterion #3 reliability. | dev/stabilize-codex-large-prompt-path-with-d | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Execute one canonical failed-task cleanup pass after reconciliation — run one scripted sweep over `.dev/failed-tasks.md` to collapse duplicate `pending` rows by normalized title+branch, supersede already-completed retries, and log before/after counts. Mission: Criterion #2 loop efficiency and Criterion #3 convergent state. | dev/execute-one-canonical-failed-task-cleanu | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Run one canonical failed-task reconciliation sweep and supersede duplicate retries — in `scripts/watchdog.sh`, dedupe `.dev/failed-tasks.md` by normalized title+branch, keep one canonical pending row per root cause, supersede completed/redundant variants, and emit `task_superseded` transitions. Mission: Criterion #2 throughput and Criterion #3 convergent state. | dev/run-one-canonical-failed-task-reconcilia | typecheck failed | 0 | superseded |
| 2026-02-20 | [NMI] Produce diagnostics bundle for blocked roots before requeue — for each blocked root cause, record exact failing file/line/typecheck error and minimal repro scope in `.dev/blockers.md` Active section, then supersede stale duplicate failed rows for that root. Mission: Criterion #2 self-correction closure. | dev/produce-diagnostics-bundle-for-blocked-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Stabilize Codex large-prompt path with deterministic exit-code preservation — in `scripts/agents/codex.sh`, enforce stdin-first prompt delivery with temp-file fallback only when required, preserve child exit codes through `_agent_exec`, and add `bash -n` plus >300KB regression coverage. Mission: Criterion #6 multi-agent compatibility and Criterion #3 reliability. | dev/stabilize-codex-large-prompt-path-with-d | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add regression coverage for failed-task canonicalization invariants — extend shell tests for watchdog/task-fixer to prove duplicate pending rows are superseded, canonical rows are preserved across retries, and blocked roots are not duplicated into new pending variants. Mission: Criterion #2 quality gates and Criterion #3 deterministic behavior. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [INFRA] Enforce canonical failed-task convergence before fixer dispatch — in `scripts/watchdog.sh`, add a pre-dispatch invariant pass that keeps exactly one active row per normalized root (`pending | merged to main | blocked`) in `.dev/failed-tasks.md`, supersedes duplicates, and emits per-root reconciliation counts. Mission: Criterion #2 self-correction throughput and Criterion #3 convergent state. | 1 | fixed |
| 2026-02-20 | [INFRA] Canonicalize active failed-task roots and collapse duplicate pending variants — in `scripts/watchdog.sh` pre-dispatch reconciliation, ensure exactly one active row per normalized root (`pending | merged to main | blocked`) in `.dev/failed-tasks.md`, supersede all duplicate variants, and log before/after root counts. Mission: Criterion #2 self-correction throughput and Criterion #3 convergent state. | 1 | fixed |
| 2026-02-20 | [TEST] Add regression coverage for failed-task canonicalization invariants — extend shell tests for watchdog/task-fixer to prove duplicate pending rows are superseded, canonical rows are preserved across retries, and blocked roots are not duplicated into new pending variants. Mission: Criterion #2 quality gates and Criterion #3 deterministic behavior. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [TEST] Add regression coverage for failed-task canonicalization invariants — extend shell tests for watchdog/task-fixer to prove duplicate pending rows are superseded, canonical rows are preserved across retries, and blocked roots are not duplicated into new pending variants. Mission: Criterion #2 quality gates and Criterion #3 deterministic behavior. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Unblock Codex large-prompt reliability root with stdin-first + exit-code invariants — in `scripts/agents/codex.sh` and shell tests, reproduce current typecheck failure from failed root, preserve stdin-first prompt path, and land minimal fix that keeps >300KB regression coverage green. Mission: Criterion #6 multi-agent compatibility and Criterion #2 self-correction closure. | dev/unblock-codex-large-prompt-reliability-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unblock Codex large-prompt reliability root with stdin-first + exit-code invariants — in `scripts/agents/codex.sh` and shell tests, reproduce current typecheck failure from failed root, preserve stdin-first prompt path, and land minimal fix that keeps >300KB regression coverage green. Mission: Criterion #6 multi-agent compatibility and Criterion #2 self-correction closure. | dev/unblock-codex-large-prompt-reliability-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unblock pipeline-logs buffer line-count optimization root — in `packages/dashboard/src/handlers/pipeline-logs.ts` and related tests, retain buffer newline counting while restoring strict typecheck and response-shape parity for empty/no-trailing-newline logs. Mission: Criterion #3 runtime efficiency and Criterion #2 reliable gates. | dev/unblock-pipeline-logs-buffer-line-count- | typecheck failed | 0 | superseded |
| 2026-02-20 | [NMI] Refresh blocked-root diagnostics snapshot to one canonical row per root cause — rebuild `.dev/blockers.md` Active from current `status=blocked` + `attempts>=3` rows in `.dev/failed-tasks.md`, attaching latest exact `pnpm typecheck` file:line:error diagnostics from worker/fixer logs and removing resolved entries. Mission: Criterion #2 self-correction closure. | dev/refresh-blocked-root-diagnostics-snapsho | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Harden project-driver prompt/task postfilter for durable root-cause titles — in `scripts/project-driver.sh`, enforce canonical title reuse for retries, reject “re-open” variant generation when a canonical root exists, and cap unchecked backlog growth under overloaded retry conditions. Mission: Criterion #3 convergent planning and Criterion #2 retry-loop reduction. | dev/harden-project-driver-prompttask-postfil | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Canonicalize active failed-task roots and collapse duplicate variants — in `scripts/watchdog.sh` pre-dispatch reconciliation plus one cleanup invocation, enforce one active row per normalized root (`pending | merged to main | blocked`), supersede redundant variants, and emit before/after root counts to logs/events. Mission: Criterion #2 self-correction throughput and Criterion #3 convergent state. | 1 | fixed |
| 2026-02-20 | [INFRA] Canonicalize active failed-task roots and collapse duplicate variants — in `scripts/watchdog.sh` pre-dispatch reconciliation plus one cleanup invocation, enforce one active row per normalized root (`pending | merged to main | blocked`), supersede redundant variants, and emit before/after root counts to logs/events. Mission: Criterion #2 self-correction throughput and Criterion #3 convergent state. | 1 | fixed |
| 2026-02-20 | [FIX] Unblock Codex large-prompt reliability root (canonical) — in `scripts/agents/codex.sh` and shell regression tests, keep stdin-first prompt delivery, preserve child exit codes through `_agent_exec`, and pass `pnpm typecheck` plus >300KB prompt coverage without spawning new retry variants. Mission: Criterion #6 multi-agent compatibility and Criterion #2 self-correction closure. | dev/unblock-codex-large-prompt-reliability-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unblock CLI shared helper DRY root for `readFile`/`isProcessRunning` — finalize shared utilities in `packages/cli/src/utils/`, update all command imports, and add dir-lock/file-lock compatibility tests so `pnpm typecheck` passes. Mission: Criterion #3 maintainability and Criterion #1 reliability. | dev/unblock-cli-shared-helper-dry-root-for-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unblock dashboard backlog-parser DRY extraction root — centralize `extractTitle()` and `parseBlockedBy()` in `packages/dashboard/src/lib/backlog-parser.ts`, update `pipeline-status.ts` and `tasks.ts`, and add parity tests to end this retry loop. Mission: Criterion #3 maintainability and Criterion #2 retry-loop reduction. | dev/unblock-dashboard-backlog-parser-dry-ext | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unblock pipeline-logs buffer line-count optimization root with response-shape parity — in `packages/dashboard/src/handlers/pipeline-logs.ts` and tests, retain buffer newline counting while restoring strict typecheck and exact empty/no-trailing-newline behavior. Mission: Criterion #3 runtime efficiency and Criterion #2 reliable gates. | dev/unblock-pipeline-logs-buffer-line-count- | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Unblock CLI operational E2E smoke root in one canonical task — stabilize `tests/e2e/cli-commands.test.sh` assertions for `stop`, `pause/resume`, `completions bash`, and `validate`, keeping `pnpm typecheck` green. Mission: Criterion #2 quality gates and Criterion #1 safe adoption. | dev/unblock-cli-operational-e2e-smoke-root-i | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Reduce project-driver prompt bloat from backlog history — in `scripts/project-driver.sh`, pass only unchecked backlog entries plus a bounded recent `[x]` slice (for example last 40) into `PROMPT` instead of full `.dev/backlog.md`, and log prompt byte counts before/after. Mission: Criterion #2 self-correction throughput and Criterion #3 deterministic planning. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [NMI] Publish canonical blocked-root repro matrix for top active roots — for Codex, config parity, CLI E2E, pipeline-logs, and parser/helper DRY roots, record exact failing `pnpm typecheck` commands, primary file:line diagnostics, and explicit pass conditions in `.dev/blockers.md` Active. Mission: Criterion #2 self-correction closure. | dev/publish-canonical-blocked-root-repro-mat | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Reduce project-driver prompt bloat from backlog history — in `scripts/project-driver.sh`, pass only unchecked backlog entries plus a bounded recent `[x]` slice (for example last 40) into `PROMPT` instead of full `.dev/backlog.md`, and log prompt byte counts before/after. Mission: Criterion #2 self-correction throughput and Criterion #3 deterministic planning. | merged to main | typecheck failed | 1 | fixed |
| 2026-02-20 | [FIX] Land canonical CLI helper DRY extraction for `readFile`/`isProcessRunning` — finalize shared utilities in `packages/cli/src/utils/`, migrate `doctor.ts`/`status.ts`/`watch.ts`/`start.ts`/`metrics.ts`/`cleanup.ts`, and add dir-lock plus file-lock compatibility tests. Mission: Criterion #3 maintainability and Criterion #1 reliability. | dev/land-canonical-cli-helper-dry-extraction | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Enforce continuous failed-task root convergence beyond one-time sweep — in `scripts/watchdog.sh`, add per-cycle reconciliation metrics (`active_roots`, `duplicate_active_rows`, `superseded_rows`) and fail-safe supersede for redundant active variants, emitting structured `task_superseded` and reconciliation events. Mission: Criterion #2 self-correction throughput and Criterion #3 convergent state. | dev/enforce-continuous-failed-task-root-conv | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add regression coverage for failed-task convergence across `pending | fix/add-regression-coverage-for-failed-task- | typecheck failed after fix attempt 1 | 1 | superseded |
| 2026-02-20 | [FIX] Close blocked config parity root for one-shot/watchdog knobs — align `templates/skynet.config.sh` and `packages/cli/src/commands/config.ts` so `SKYNET_WATCHDOG_INTERVAL`, `SKYNET_ONE_SHOT`, and `SKYNET_ONE_SHOT_TASK` defaults/descriptions match exactly, add/update config command coverage, and keep `pnpm typecheck` green. Mission: Criterion #1 adoption safety and Criterion #3 deterministic config behavior. | dev/close-blocked-config-parity-root-for-one | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Close blocked config parity root for one-shot/watchdog knobs — align `templates/skynet.config.sh` and `packages/cli/src/commands/config.ts` so `SKYNET_WATCHDOG_INTERVAL`, `SKYNET_ONE_SHOT`, and `SKYNET_ONE_SHOT_TASK` defaults/descriptions match exactly, add/update config command coverage, and keep `pnpm typecheck` green. Mission: Criterion #1 adoption safety and Criterion #3 deterministic config behavior. | dev/close-blocked-config-parity-root-for-one | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Close blocked backlog-parser DRY root without parser behavior drift — centralize `extractTitle()` and `parseBlockedBy()` in `packages/dashboard/src/lib/backlog-parser.ts`, update `pipeline-status.ts` and `tasks.ts` imports, and add/adjust parity tests for blocked dependency parsing with `pnpm typecheck` green. Mission: Criterion #3 maintainability and Criterion #2 retry-loop reduction. | dev/close-blocked-backlog-parser-dry-root-wi | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Close blocked pipeline-logs optimization root with response-shape parity — in `packages/dashboard/src/handlers/pipeline-logs.ts` and related tests, keep buffer-based newline counting while preserving exact empty-file and no-trailing-newline response behavior and passing `pnpm typecheck`. Mission: Criterion #3 runtime efficiency and Criterion #2 reliable gates. | dev/close-blocked-pipeline-logs-optimization | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Prevent future duplicate retry variants at source in project-driver output filtering — hard-fail generation of new unchecked tasks whose normalized title matches any active/blocked canonical root in `.dev/failed-tasks.md`, log skipped roots, and keep unchecked backlog capped under 15 in `scripts/project-driver.sh`. Mission: Criterion #3 convergent planning and Criterion #2 self-correction stability. | dev/prevent-future-duplicate-retry-variants- | typecheck failed | 0 | superseded |
| 2026-02-20 | [DATA] Surface failed-root convergence metrics in pipeline status API — in `packages/dashboard/src/handlers/pipeline-status.ts`, add counts for `activeRoots`, `duplicateActiveRows`, and `blockedRoots` (derived from `.dev/failed-tasks.md`) so dashboard/operator views can track reconciliation progress over time. Mission: Criterion #4 visibility and Criterion #5 measurable progress. | dev/surface-failed-root-convergence-metrics- | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Add retry-pressure mode in `scripts/project-driver.sh` when pending retries exceed threshold — if `failed-tasks.md` pending count is `> 20`, generate at most 3 new tasks per cycle, restrict output to reliability/reconciliation tags (`[FIX]`, `[INFRA]`, `[TEST]`, `[NMI]`), and emit `driver_retry_pressure_mode` metrics. Mission: Criterion #2 self-correction throughput and Criterion #3 convergent planning. | dev/add-retry-pressure-mode-in-scriptsprojec | typecheck failed | 0 | superseded |
| 2026-02-20 | [NMI] Publish canonical blocked-root repro matrix from latest logs — regenerate `.dev/blockers.md` Active from `status=blocked` rows in `.dev/failed-tasks.md` using current `.dev/scripts/dev-worker-*.log` and `.dev/scripts/task-fixer-*.log` `pnpm typecheck` diagnostics, with exactly one canonical row per root and explicit pass conditions. Mission: Criterion #2 self-correction closure and Criterion #3 convergent state. | dev/publish-canonical-blocked-root-repro-mat | typecheck failed | 0 | superseded |
| 2026-02-20 | [NMI] Resolve blocked-root state drift between `.dev/backlog.md` and `.dev/failed-tasks.md` — add a watchdog reconciliation pass that supersedes stale blocked/pending duplicates for already-fixed roots and emits before/after root counts, without touching active `fixing-*` rows. Mission: Criterion #2 retry-loop stability and Criterion #3 state convergence. | dev/resolve-blocked-root-state-drift-between | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Close blocked CLI helper DRY root for `readFile`/`isProcessRunning` — finalize shared helpers in `packages/cli/src/utils/`, migrate command imports, and add dir-lock/file-lock compatibility tests with `pnpm typecheck` green. Mission: Criterion #3 maintainability and Criterion #1 reliability. | dev/close-blocked-cli-helper-dry-root-for-re | typecheck failed (fix attempt 1 failed) (fix attempt 2 failed) | 2 | pending |
| 2026-02-20 | [INFRA] Run one canonical failed-task compaction sweep for active roots — in `scripts/watchdog.sh`, dedupe `pending | fix/run-one-canonical-failed-task-compaction | dev/run-one-canonical-failed-task-compaction (fix attempt 1 failed) | 1 | superseded |
| 2026-02-20 | [INFRA] Reconcile blocked/pending drift between failed-task and backlog state after fixer cycles — add a watchdog post-cycle reconciliation report (`active_roots`, `duplicate_active_rows`, `superseded_rows`) and emit events for every superseded duplicate. Mission: Criterion #2 retry-loop stability and Criterion #4 visibility. | dev/reconcile-blockedpending-drift-between-f | claude exit code 1 | 0 | superseded |
| 2026-02-20 | [FIX] Close blocked CLI helper DRY root for `readFile`/`isProcessRunning` — finalize shared helpers in `packages/cli/src/utils/`, migrate command imports, and add dir-lock/file-lock compatibility tests with `pnpm typecheck` green. Mission: Criterion #3 maintainability and Criterion #1 reliability. | dev/close-blocked-cli-helper-dry-root-for-re | typecheck failed (fix attempt 1 failed) (fix attempt 2 failed) | 2 | pending |
| 2026-02-20 | [DATA] Refresh blocker state from canonical failed-root reality after reconciliation — regenerate `.dev/blockers.md` Active from `.dev/failed-tasks.md` after the dedupe/supersede sweep, keeping exactly one bullet per active root and removing stale duplicates for the CLI helper DRY root. Mission: Criterion #4 trustworthy visibility and Criterion #5 measurable progress. | dev/refresh-blocker-state-from-canonical-fai | typecheck failed | 0 | pending |
| 2026-02-20 | [DATA] Refresh blocker state from canonical failed-root reality after reconciliation — regenerate `.dev/blockers.md` Active from `.dev/failed-tasks.md` after the dedupe/supersede sweep, keeping exactly one bullet per active root and removing stale duplicates for the CLI helper DRY root. Mission: Criterion #4 trustworthy visibility and Criterion #5 measurable progress. | dev/refresh-blocker-state-from-canonical-fai | typecheck failed | 0 | pending |
| 2026-02-20 | [DATA] Surface failed-root convergence snapshot in CLI status JSON — in `packages/cli/src/commands/status.ts`, include `activeRoots`, `duplicateActiveRows`, and `blockedRoots` in `--json` output using the same parsing rules as dashboard pipeline-status. Mission: Criterion #4 full visibility and Criterion #5 measurable mission progress. | dev/surface-failed-root-convergence-snapshot | typecheck failed | 0 | pending |
| 2026-02-20 | [DATA] Refresh `.dev/blockers.md` Active from canonical failed-root state after convergence tasks land — rebuild Active entries from current `.dev/failed-tasks.md` so exactly one bullet remains per true open root and stale duplicate-root bullets are removed. Mission: Criterion #4 trustworthy visibility and Criterion #5 measurable mission progress. | dev/refresh-devblockersmd-active-from-canoni | typecheck failed | 0 | pending |
| 2026-02-20 | [TEST] Add project-driver regression for backlog history rotation invariants — in shell tests for `scripts/project-driver.sh`, verify rotation never reorders or rewrites leading claimed `[>]` rows and never removes unchecked `[ ]` tasks while archiving only older `[x]` history entries. Mission: Criterion #2 quality gates and Criterion #3 deterministic planning behavior. | dev/add-project-driver-regression-for-backlo | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Add failed-task history rotation guardrail to keep fixer context bounded — in `scripts/watchdog.sh`, move older `fixed|superseded` rows beyond a cap from `.dev/failed-tasks.md` to `.dev/failed-tasks-archive.md` while preserving active `pending|fixing-*|blocked` rows order. Mission: Criterion #2 retry-loop throughput and Criterion #3 deterministic state management. | dev/add-failed-task-history-rotation-guardra | typecheck failed | 0 | pending |
| 2026-02-20 | [TEST] Add project-driver regression for backlog history rotation invariants — in shell tests for `scripts/project-driver.sh`, verify rotation never reorders or rewrites leading claimed `[>]` rows and never removes unchecked `[ ]` tasks while archiving only older `[x]` history entries. Mission: Criterion #2 quality gates and Criterion #3 deterministic planning behavior. | dev/add-project-driver-regression-for-backlo | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add watchdog regression for blocked-row supersede guardrails — in shell tests for `scripts/watchdog.sh`, assert completed-root supersede touches only stale `blocked|pending` rows, never rewrites `fixing-*` rows, and preserves unaffected active-row ordering. Mission: Criterion #2 quality gates and Criterion #3 deterministic recovery. | dev/add-watchdog-regression-for-blocked-row- | claude exit code 101 | 0 | pending |
| 2026-02-20 | [TEST] Add project-driver regression to suppress task generation for stale-active completed roots — in `scripts/project-driver.sh` tests, verify unchecked generation skips roots detected as stale-active (present as `blocked|pending` in failed-tasks but already completed) until watchdog supersedes them. Mission: Criterion #2 quality gates and Criterion #3 convergent planning. | dev/add-project-driver-regression-to-suppres | typecheck failed | 0 | pending |
| 2026-02-20 | [NMI] Publish canonical diagnostics only for truly remaining active roots after cleanup — if any `status=blocked|pending` roots remain, capture latest exact `pnpm typecheck` diagnostics from `.dev/scripts/dev-worker-*.log` and `.dev/scripts/task-fixer-*.log`, keep one canonical follow-up task per root, and supersede duplicate variants. Mission: Criterion #2 self-correction closure and Criterion #4 trustworthy telemetry. | dev/publish-canonical-diagnostics-only-for-t | typecheck failed | 0 | pending |
| 2026-02-20 | [TEST] Add regression coverage for shared failed-task field codec round-trip invariants — feed adversarial task/error strings (embedded `|`, escaped pipes, markdown punctuation, multi-space) through the shared codec and assert parse-stable round-trips plus unchanged active-root counting semantics. Mission: Criterion #2 quality gates and Criterion #3 convergent parsing. | dev/add-regression-coverage-for-shared-faile | typecheck failed | 0 | pending |
| 2026-02-20 | [DATA] Emit canonical `failed_root_snapshot` and blockers-sync parity check after reconciliation — extend watchdog telemetry to include a checksum/hash of active normalized roots and verify `.dev/blockers.md` Active reflects the same root set; emit mismatch event when drift is detected. Mission: Criterion #4 trustworthy visibility and Criterion #5 measurable progress. | dev/emit-canonical-failedrootsnapshot-and-bl | typecheck failed | 0 | pending |
| 2026-02-20 | [INFRA] Centralize failed-task markdown escaping/unescaping into shared helpers and migrate all writers/parsers — add shared shell helpers in `scripts/_config.sh` (or sourced helper) so `task-fixer.sh` and `watchdog.sh` use one canonical encode/decode path for `|`, backticks, and newlines in table fields. Mission: Criterion #3 deterministic state and Criterion #2 retry-loop stability. | dev/centralize-failed-task-markdown-escaping | typecheck failed | 0 | pending |
| 2026-02-20 | [TEST] Add shell regression for watchdog reconcile-only mode idempotence — assert reconcile-only performs zero dispatches, preserves active `fixing-*` rows, emits one `failed_root_snapshot`, and is no-op on second run with identical input. Mission: Criterion #2 quality gates and Criterion #3 convergent recovery. | dev/add-shell-regression-for-watchdog-reconc | typecheck failed | 0 | pending |
| 2026-02-20 | [TEST] Add shell regression for watchdog reconcile-only mode idempotence — assert reconcile-only performs zero dispatches, preserves active `fixing-*` rows, emits one `failed_root_snapshot`, and is no-op on second run with identical input. Mission: Criterion #2 quality gates and Criterion #3 convergent recovery. | dev/add-shell-regression-for-watchdog-reconc | typecheck failed | 0 | pending |
| 2026-02-20 | [DATA] Surface failed-root hash parity in dashboard pipeline-status output — in `packages/dashboard/src/handlers/pipeline-status.ts` (and response types), include `activeRootHash`, `blockersActiveHash`, and `hashMatch` using the same normalized-root hashing semantics as watchdog parity checks. Mission: Criterion #4 trustworthy visibility and Criterion #5 measurable progress. | dev/surface-failed-root-hash-parity-in-dashb | typecheck failed | 0 | pending |
| 2026-02-20 | [INFRA] Add watchdog hash-drift pressure alerting with throttle guard — when failed-root parity reports `hash_match=false` for consecutive cycles, emit one throttled high-severity event with both hashes and root counters, then suppress repeats until cooldown or convergence. Mission: Criterion #2 self-correction throughput and Criterion #4 operational awareness. | dev/add-watchdog-hash-drift-pressure-alertin | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add watchdog shell regression for failed-root hash-drift alert throttling lifecycle — in `scripts/tests/watchdog.sh`, simulate repeated `hash_match=false` cycles and assert one high-severity alert per cooldown window, then verify alerting re-arms after convergence. Mission: Criterion #2 quality gates and Criterion #4 trustworthy operations. | dev/add-watchdog-shell-regression-for-failed | typecheck failed | 0 | pending |
| 2026-02-20 | [DATA] Run a second reconcile-only idempotence verification after the canonical sweep and record parity evidence — execute watchdog reconcile-only twice on unchanged inputs, confirm zero additional supersedes on pass two, and update `.dev/blockers.md` Active snapshot metadata with resulting hashes/counters. Mission: Criterion #2 self-correction closure and Criterion #5 measurable progress. | dev/run-a-second-reconcile-only-idempotence- | typecheck failed | 0 | superseded |
| 2026-02-20 | [INFRA] Add watchdog guardrail to suppress no-op blockers rewrites when active-root hash is unchanged — skip `.dev/blockers.md` Active rewrites and emit a deterministic `blockers_sync_skipped` event when canonical active-root hash has not changed, reducing state churn between cycles. Mission: Criterion #3 deterministic state and Criterion #4 operational clarity. | dev/add-watchdog-guardrail-to-suppress-no-op | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add cross-surface hash-parity regression fixtures for watchdog, dashboard, and CLI — use one shared fixture root set and assert identical `activeRootHash`, `blockersActiveHash`, and `hashMatch` semantics across `scripts/tests/watchdog.sh`, `packages/dashboard/src/handlers/pipeline-status.test.ts`, and `packages/cli/src/commands/__tests__/status.test.ts`. Mission: Criterion #2 quality gates and Criterion #4 telemetry trust. | dev/add-cross-surface-hash-parity-regression | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add watchdog regression for no-op blockers sync guardrail semantics — in `scripts/tests/watchdog.sh`, assert unchanged active-root hash emits exactly one `blockers_sync_skipped` event, does not rewrite `.dev/blockers.md`, and preserves Active/Resolved/Celebration content byte-for-byte. Mission: Criterion #2 quality gates and Criterion #4 operational trust. | dev/add-watchdog-regression-for-no-op-blocke | typecheck failed | 0 | superseded |
| 2026-02-20 | [TEST] Add shell regression for auth-expiry dispatch suppression and recovery — in watchdog tests, simulate failed auth checks and assert no new claims/dispatches occur, then restore auth and assert dispatch resumes in the next cycle with a single recovery event. Mission: Criterion #2 quality gates and Criterion #3 deterministic recovery. | dev/add-shell-regression-for-auth-expiry-dis | typecheck failed | 0 | pending |
| 2026-02-20 | [INFRA] Run one canonical stale-active root supersede sweep for current blocked/pending drift — in `scripts/watchdog.sh`, reconcile `.dev/failed-tasks.md` so stale `status=blocked|pending` rows that map to `.dev/completed.md` are superseded in one pass (without touching `fixing-*` rows), and emit deterministic before/after root counters. Mission: Criterion #2 self-correction closure and Criterion #3 convergent state. | dev/run-one-canonical-stale-active-root-supe | typecheck failed | 0 | pending |
| 2026-02-20 | [INFRA] Enforce canonical backlog marker ordering before each dispatch cycle — in `scripts/watchdog.sh` (or shared `_config.sh` helper), run a pre-cycle sanitizer that guarantees all `[>]` rows stay first, `[ ]` rows follow, and any misplaced top-level `[x]` rows are moved into checked history without rewriting claimed lines byte-for-byte. Mission: Criterion #3 deterministic planning state and Criterion #2 no-task-loss reliability. | dev/enforce-canonical-backlog-marker-orderin | typecheck failed | 0 | superseded |
| 2026-02-20 | [DATA] Execute one canonical failed-task cleanup pass and commit resulting state files — run the reconciler so `.dev/failed-tasks.md` no longer lists stale blocked roots already fixed (Codex stdin path, config parity, CLI E2E smoke, pipeline-logs optimization, backlog-parser DRY, CLI helper DRY), keeping only true active roots. Mission: Criterion #2 retry-loop closure and Criterion #3 state convergence. | dev/execute-one-canonical-failed-task-cleanu | claude exit code 124 | 0 | superseded |
| 2026-02-20 | [FIX] Close blocked config parity root for watchdog/one-shot knobs — align `templates/skynet.config.sh` and `packages/cli/src/commands/config.ts` so `SKYNET_WATCHDOG_INTERVAL`, `SKYNET_ONE_SHOT`, and `SKYNET_ONE_SHOT_TASK` defaults/descriptions stay synchronized and verified by tests. Mission: Criterion #1 discoverability and Criterion #3 deterministic config behavior. | dev/close-blocked-config-parity-root-for-wat | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unblock Codex large-prompt reliability root with stdin-first invariants — in `scripts/agents/codex.sh` and shell tests, enforce prompt-via-stdin path, preserve child exit codes, and keep >300KB prompt regression coverage passing. Mission: Criterion #6 multi-agent compatibility and Criterion #2 self-correction closure. | dev/unblock-codex-large-prompt-reliability-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [FIX] Unblock Codex large-prompt reliability root with stdin-first invariants — in `scripts/agents/codex.sh` and shell tests, enforce prompt-via-stdin path, preserve child exit codes, and keep >300KB prompt regression coverage passing. Mission: Criterion #6 multi-agent compatibility and Criterion #2 self-correction closure. | dev/unblock-codex-large-prompt-reliability-r | typecheck failed | 0 | superseded |
| 2026-02-20 | [NMI] Publish canonical diagnostics only for truly remaining active roots after cleanup — if any `status=blocked|pending` roots remain, capture latest exact `pnpm typecheck` diagnostics from `.dev/scripts/dev-worker-*.log` and `.dev/scripts/task-fixer-*.log`, then keep one canonical follow-up per unresolved root. Mission: Criterion #2 self-correction closure and Criterion #4 operator trust. | dev/publish-canonical-diagnostics-only-for-t | typecheck failed | 0 | pending |
